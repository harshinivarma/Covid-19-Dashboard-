{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://ngx-joyride/lib/models/joyride-step.class.ts","ng://ngx-joyride/lib/services/joyride-options.service.ts","ng://ngx-joyride/lib/services/logger.service.ts","ng://ngx-joyride/lib/models/joyride-error.class.ts","ng://ngx-joyride/lib/services/joyride-steps-container.service.ts","ng://ngx-joyride/lib/services/dom.service.ts","ng://ngx-joyride/lib/services/templates.service.ts","ng://ngx-joyride/lib/directives/joyride.directive.ts","ng://ngx-joyride/lib/services/document.service.ts","ng://ngx-joyride/lib/services/joyride-backdrop.service.ts","ng://ngx-joyride/lib/services/event-listener.service.ts","ng://ngx-joyride/lib/components/step/joyride-step.component.ts","ng://ngx-joyride/lib/components/arrow/arrow.component.ts","ng://ngx-joyride/lib/components/button/button.component.ts","ng://ngx-joyride/lib/components/close-button/close-button.component.ts","ng://ngx-joyride/lib/services/step-drawer.service.ts","ng://ngx-joyride/lib/services/joyride-step.service.ts","ng://ngx-joyride/lib/models/joyride-step-info.class.ts","ng://ngx-joyride/lib/services/joyride.service.ts","ng://ngx-joyride/lib/joyride.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","JoyrideStep","title","ReplaySubject","text","DEFAULT_THEME_COLOR","STEP_DEFAULT_POSITION","ObservableCustomTexts","DEFAULT_TEXTS","prev","of","next","done","close","JoyrideOptionsService","themeColor","stepDefaultPosition","logsEnabled","showCounter","showPrevButton","stepsOrder","setOptions","options","steps","firstStep","startWith","waitingTime","customTexts","setCustomText","getBackdropColor","hexToRgb","getThemeColor","getStepDefaultPosition","getStepsOrder","getFirstStep","getWaitingTime","areLogsEnabled","isCounterVisible","isPrevButtonVisible","getCustomTexts","texts","toObservable","value","Observable","hex","replace","m","r","g","result","exec","parseInt","Injectable","JOYRIDE","LoggerService","optionService","debug","message","data","console","info","warn","error","JoyrideError","_super","_this","call","tslib_1.__extends","Error","JoyrideStepDoesNotExist","JoyrideStepOutOfRange","StepActionType","NEXT","PREV","JoyrideStepsContainerService","stepOptions","logger","tempSteps","currentStepIndex","stepHasBeenModified","Subject","getFirstStepIndex","index","indexOf","undefined","init","forEach","stepId","push","id","step","addStep","stepToAdd","filter","name","length","stepIndexToReplace","findIndex","get","action","stepName","getStepName","stepFound","getStepRoute","stepID","includes","split","updatePosition","position","getStepIndex","getStepNumber","getStepsCount","map","DomRefService","platformId","fakeDocument","body","documentElement","fakeWindow","document","navigator","getNativeWindow","isPlatformBrowser","window","getNativeDocument","decorators","type","Inject","args","PLATFORM_ID","TemplatesService","setPrevButton","template","_prevButton","getPrevButton","setNextButton","_nextButton","getNextButton","setDoneButton","_doneButton","getDoneButton","setCounter","_counter","getCounter","NO_POSITION","JoyrideDirective","joyrideStepsContainer","viewContainerRef","domService","router","templateService","stepPosition","EventEmitter","subscriptions","windowRef","ngAfterViewInit","prevTemplate","nextTemplate","doneTemplate","counterTemplate","targetViewContainer","setAsyncFields","stepContent","stepContentParams","nextClicked","prevCliked","tourDone","route","url","substr","transformCssStyle","getComputedStyle","element","nativeElement","transform","isElementOrAncestorFixed","isElementFixed","isAncestorsFixed","parentElement","ngOnChanges","changes","subscribe","nodeName","ngOnDestroy","sub","unsubscribe","Directive","selector","ViewContainerRef","Router","Input","Output","DocumentService","DOMService","setDocumentHeight","elementsFromPoint","bind","getElementFixedTop","elementRef","getBoundingClientRect","top","getElementFixedLeft","left","getElementAbsoluteTop","scrollOffsets","getScrollOffsets","y","getElementAbsoluteLeft","x","documentHeight","calculateDocumentHeight","getDocumentHeight","isParentScrollable","getFirstScrollableParent","isElementBeyondOthers","keywordToDiscard","x1","y1","x2","width","y2","height","elements1","elements2","getFirstElementWithoutKeyword","scrollIntoView","firstScrollableParent","scrollTo","scrollTop","scrollToTheTop","scrollToTheBottom","scrollHeight","clientHeight","node","regex","style","prop","getPropertyValue","scrollparent","test","scroll","parentNode","documentRef","Math","max","offsetHeight","winReference","docReference","pageXOffset","pageYOffset","compatMode","scrollLeft","parents","parent","elem","elementFromPoint","pointerEvents","elements","keyword","classList","toString","shift","JoyrideBackdropService","documentService","optionsService","rendererFactory","lastXScroll","lastYScroll","setRenderer","renderer","createRenderer","draw","targetAbsoluteTop","getTargetTotalTop","targetAbsoluteLeft","getTargetTotalLeft","currentBackdropContainer","createElement","addClass","setStyle","setAttribute","backdropContent","appendChild","backdropTop","backdropMiddleContainer","backdropMiddleContent","leftBackdrop","targetBackdrop","offsetWidth","rightBackdrop","backdropBottom","removeLastBackdrop","drawCurrentBackdrop","lastBackdropContainer","remove","redrawTarget","handleVerticalScroll","handleHorizontalScroll","targetVC","redraw","scrollY","scrollX","newBackdropLeftWidth","handleTargetPartialWidth","visibleTargetWidth","newBackdropTopHeight","handleTargetPartialHeight","visibleTargetHeight","removeChild","RendererFactory2","Scroll","EventListenerService","scrollEvent","resizeEvent","startListeningScrollEvents","scrollUnlisten","listen","evt","startListeningResizeEvents","resizeUnlisten","stopListeningScrollEvents","stopListeningResizeEvents","STEP_MIN_WIDTH","STEP_HEIGHT","JoyrideStepComponent","injector","stepsContainerService","eventListenerService","stepWidth","stepHeight","showArrow","arrowSize","ARROW_SIZE","ngOnInit","joyrideStepService","JoyrideStepService","subscribeToResizeEvents","asObservable","setCustomTemplates","setCustomTexts","counter","val","checkRedraw","isCustomized","stepContainer","CUSTOM_STEP_MAX_WIDTH_VW","updateStepDimensions","STEP_MAX_WIDTH","dimensions","getDimensionsByAspectRatio","clientWidth","adjustDimensions","drawStep","setTimeout","redrawStep","customeTexts","prevText","nextText","doneText","stepHolder","targetWidth","targetHeight","setStepStyle","numberOfSteps","counterData","total","customContent","ctx","customPrevButton","customNextButton","customDoneButton","customCounter","isFirstStep","isLastStep","setStyleTop","setStyleBottom","setStyleRight","setStyleLeft","setStyleCenter","topPosition","DISTANCE_FROM_TARGET","stepAbsoluteTop","arrowTopPosition","leftPosition","stepAbsoluteLeft","arrowLeftPosition","adjustLeftPosition","adjustRightPosition","arrowPosition","autofixTopPosition","adjustTopPosition","adjustBottomPosition","autofixRightPosition","autofixBottomPosition","autofixLeftPosition","currentWindowWidth","newLeftPos","deltaLeftPosition","newTopPos","deltaTopPosition","positionAlreadyFixed","aspectRatio","calcHeight","newWidth","newHeight","subscription","Component","encapsulation","ViewEncapsulation","None","Injector","Renderer2","ViewChild","static","JoyrideArrowComponent","JoyrideButtonComponent","clicked","onClick","emit","JoyrideCloseButtonComponent","StepDrawerService","componentFactoryResolver","appRef","refMap","ref","resolveComponentFactory","attachView","hostView","domElem","rootNodes","instance","changeDetectorRef","detectChanges","stepInstance","detachView","destroy","ComponentFactoryResolver","ApplicationRef","backDropService","eventListener","stepDrawerService","winTopPosition","winBottomPosition","stepsObserver","initViewportPositions","subscribeToScrollEvents","innerHeight","currentStep","startTour","tryShowStep","subscribeToStepsUpdates","removeCurrentStep","notifyTourIsFinished","navigateToStepPage","stepRoute","navigate","updatedStep","actionType","timeout","showStep","scrollIfElementBeyondOtherElements","scrollIfStepAndTargetAreNotVisible","notifyStepClicked","stepInfo","number","complete","scrollWhenTargetOrStepAreHiddenBottom","scrollWhenTargetOrStepAreHiddenTop","totalTargetBottom","getMaxTargetAndStepBottomPosition","scrollBy","totalTargetTop","getMaxTargetAndStepTopPosition","min","JoyrideStepInfo","JoyrideService","stepService","tourInProgress","tour$","pipe","finalize","closeTour","isTourInProgress","routerModuleForChild","RouterModule","forChild","JoyrideModule","forRoot","ngModule","providers","NgModule","imports","CommonModule","declarations","entryComponents","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { ViewContainerRef, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { JoyrideStepComponent } from '../components/step/joyride-step.component';\r\nimport { ReplaySubject } from 'rxjs';\r\n\r\nexport class JoyrideStep {\r\n    constructor() {\r\n        this.title = new ReplaySubject<string>();\r\n        this.text = new ReplaySubject<string>();\r\n    }\r\n    name: string;\r\n    route: string;\r\n    position: string;\r\n    title: ReplaySubject<string>;\r\n    text: ReplaySubject<string>;\r\n    stepContent: TemplateRef<any>;\r\n    stepContentParams: Object;\r\n    nextClicked: EventEmitter<any>;\r\n    prevCliked: EventEmitter<any>;\r\n    tourDone: EventEmitter<any>;\r\n    transformCssStyle: string;\r\n    isElementOrAncestorFixed: boolean;\r\n    targetViewContainer: ViewContainerRef;\r\n    stepInstance: JoyrideStepComponent;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n    JoyrideOptions,\r\n    CustomTexts,\r\n    ICustomTexts\r\n} from '../models/joyride-options.class';\r\nimport { of, Observable } from 'rxjs';\r\n\r\nexport const DEFAULT_THEME_COLOR = '#3b5560';\r\nexport const STEP_DEFAULT_POSITION = 'bottom';\r\nexport const DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;\r\n\r\nexport class ObservableCustomTexts implements ICustomTexts {\r\n    prev: Observable<string>;\r\n    next: Observable<string>;\r\n    done: Observable<string>;\r\n    close: Observable<string>;\r\n}\r\nexport const DEFAULT_TEXTS: ObservableCustomTexts = {\r\n    prev: of('prev'),\r\n    next: of('next'),\r\n    done: of('done'),\r\n    close: of(null)\r\n};\r\n\r\nexport interface IJoyrideOptionsService {\r\n    setOptions(options: JoyrideOptions): void;\r\n    getBackdropColor(): string;\r\n    getThemeColor(): string;\r\n    getStepDefaultPosition();\r\n    getStepsOrder(): string[];\r\n    getFirstStep(): string;\r\n    getWaitingTime(): number;\r\n    areLogsEnabled(): boolean;\r\n    isCounterVisible(): boolean;\r\n    isPrevButtonVisible(): boolean;\r\n    getCustomTexts(): ObservableCustomTexts;\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideOptionsService implements IJoyrideOptionsService {\r\n    private themeColor: string = DEFAULT_THEME_COLOR;\r\n    private stepDefaultPosition: string = STEP_DEFAULT_POSITION;\r\n    private logsEnabled: boolean = false;\r\n    private showCounter: boolean = true;\r\n    private showPrevButton: boolean = true;\r\n    private stepsOrder: string[] = [];\r\n    private firstStep: string;\r\n    private waitingTime: number;\r\n    private customTexts: ObservableCustomTexts;\r\n\r\n    setOptions(options: JoyrideOptions) {\r\n        this.stepsOrder = options.steps;\r\n        this.stepDefaultPosition = options.stepDefaultPosition\r\n            ? options.stepDefaultPosition\r\n            : this.stepDefaultPosition;\r\n        this.logsEnabled =\r\n            typeof options.logsEnabled !== 'undefined'\r\n                ? options.logsEnabled\r\n                : this.logsEnabled;\r\n        this.showCounter =\r\n            typeof options.showCounter !== 'undefined'\r\n                ? options.showCounter\r\n                : this.showCounter;\r\n        this.showPrevButton =\r\n            typeof options.showPrevButton !== 'undefined'\r\n                ? options.showPrevButton\r\n                : this.showPrevButton;\r\n        this.themeColor = options.themeColor\r\n            ? options.themeColor\r\n            : this.themeColor;\r\n        this.firstStep = options.startWith;\r\n        this.waitingTime =\r\n            typeof options.waitingTime !== 'undefined'\r\n                ? options.waitingTime\r\n                : DEFAULT_TIMEOUT_BETWEEN_STEPS;\r\n        typeof options.customTexts !== 'undefined'\r\n            ? this.setCustomText(options.customTexts)\r\n            : this.setCustomText(DEFAULT_TEXTS);\r\n    }\r\n\r\n    getBackdropColor() {\r\n        return this.hexToRgb(this.themeColor);\r\n    }\r\n\r\n    getThemeColor() {\r\n        return this.themeColor;\r\n    }\r\n\r\n    getStepDefaultPosition() {\r\n        return this.stepDefaultPosition;\r\n    }\r\n\r\n    getStepsOrder() {\r\n        return this.stepsOrder;\r\n    }\r\n\r\n    getFirstStep() {\r\n        return this.firstStep;\r\n    }\r\n\r\n    getWaitingTime() {\r\n        return this.waitingTime;\r\n    }\r\n\r\n    areLogsEnabled() {\r\n        return this.logsEnabled;\r\n    }\r\n\r\n    isCounterVisible() {\r\n        return this.showCounter;\r\n    }\r\n\r\n    isPrevButtonVisible() {\r\n        return this.showPrevButton;\r\n    }\r\n\r\n    getCustomTexts(): ObservableCustomTexts {\r\n        return this.customTexts;\r\n    }\r\n\r\n    private setCustomText(texts: CustomTexts) {\r\n        let prev, next, done, close: string | Observable<string>;\r\n        prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;\r\n        next = texts.next ? texts.next : DEFAULT_TEXTS.next;\r\n        done = texts.done ? texts.done : DEFAULT_TEXTS.done;\r\n        close = texts.close ? texts.close : DEFAULT_TEXTS.close;\r\n        this.customTexts = <ObservableCustomTexts>{\r\n            prev: this.toObservable(prev),\r\n            next: this.toObservable(next),\r\n            done: this.toObservable(done),\r\n            close: this.toObservable(close)\r\n        };\r\n    }\r\n\r\n    private toObservable(value: string | Observable<string>) {\r\n        return value instanceof Observable ? value : of(value);\r\n    }\r\n\r\n    private hexToRgb(hex: any): string {\r\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n        hex = hex.replace(shorthandRegex, (m: any, r: any, g: any, b: any) => {\r\n            return r + r + g + g + b + b;\r\n        });\r\n\r\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result\r\n            ? `${parseInt(result[1], 16)}, ${parseInt(\r\n                  result[2],\r\n                  16\r\n              )}, ${parseInt(result[3], 16)}`\r\n            : null;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\n\r\nconst JOYRIDE = 'ngx-joyride:::';\r\n\r\n@Injectable()\r\nexport class LoggerService {\r\n\r\n    constructor(private readonly optionService: JoyrideOptionsService) { }\r\n\r\n    debug(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.debug(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    info(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.info(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    warn(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.warn(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n    error(message?: string, data: any = \"\") {\r\n        if (this.optionService.areLogsEnabled()) {\r\n            console.error(JOYRIDE + message, data);\r\n        }\r\n    }\r\n\r\n}","export class JoyrideError extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideError.prototype);\r\n    }\r\n}\r\n\r\nexport class JoyrideStepDoesNotExist extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideStepDoesNotExist.prototype);\r\n    }\r\n}\r\n\r\nexport class JoyrideStepOutOfRange extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, JoyrideStepOutOfRange.prototype);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { Subject } from 'rxjs';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { LoggerService } from './logger.service';\r\nimport { JoyrideError, JoyrideStepOutOfRange } from '../models/joyride-error.class';\r\n\r\nconst ROUTE_SEPARATOR = '@';\r\n\r\nclass Step {\r\n    id: string;\r\n    step: JoyrideStep;\r\n}\r\n\r\nexport enum StepActionType {\r\n    NEXT = 'NEXT',\r\n    PREV = 'PREV'\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideStepsContainerService {\r\n    private steps: Step[];\r\n    private tempSteps: JoyrideStep[] = [];\r\n    private currentStepIndex = -2;\r\n    stepHasBeenModified: Subject<JoyrideStep> = new Subject<JoyrideStep>();\r\n\r\n    constructor(private readonly stepOptions: JoyrideOptionsService, private readonly logger: LoggerService) {}\r\n\r\n    private getFirstStepIndex(): number {\r\n        const firstStep = this.stepOptions.getFirstStep();\r\n        const stepIds = this.stepOptions.getStepsOrder();\r\n\r\n        let index = stepIds.indexOf(firstStep);\r\n        if (index < 0) {\r\n            index = 0;\r\n            if (firstStep !== undefined) this.logger.warn(`The step ${firstStep} does not exist. Check in your step list if it's present.`);\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    init() {\r\n        this.logger.info('Initializing the steps array.');\r\n        this.steps = [];\r\n        this.currentStepIndex = this.getFirstStepIndex() - 1;\r\n        let stepIds = this.stepOptions.getStepsOrder();\r\n        stepIds.forEach(stepId => this.steps.push({ id: stepId, step: null }));\r\n    }\r\n\r\n    addStep(stepToAdd: JoyrideStep) {\r\n        let stepExist = this.tempSteps.filter(step => step.name === stepToAdd.name).length > 0;\r\n        if (!stepExist) {\r\n            this.logger.info(`Adding step ${stepToAdd.name} to the steps list.`);\r\n            this.tempSteps.push(stepToAdd);\r\n        } else {\r\n            let stepIndexToReplace = this.tempSteps.findIndex(step => step.name === stepToAdd.name);\r\n            this.tempSteps[stepIndexToReplace] = stepToAdd;\r\n        }\r\n    }\r\n    get(action: StepActionType): JoyrideStep {\r\n        if (action === StepActionType.NEXT) this.currentStepIndex++;\r\n        else this.currentStepIndex--;\r\n\r\n        if (this.currentStepIndex < 0 || this.currentStepIndex >= this.steps.length)\r\n            throw new JoyrideStepOutOfRange('The first or last step of the tour cannot be found!');\r\n\r\n        const stepName = this.getStepName(this.steps[this.currentStepIndex].id);\r\n        const index = this.tempSteps.findIndex(step => step.name === stepName);\r\n        let stepFound = this.tempSteps[index];\r\n        this.steps[this.currentStepIndex].step = stepFound;\r\n\r\n        if (stepFound == null) {\r\n            this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`);\r\n        }\r\n\r\n        return stepFound;\r\n    }\r\n\r\n    getStepRoute(action: StepActionType) {\r\n        let stepID: string;\r\n        if (action === StepActionType.NEXT) {\r\n            stepID = this.steps[this.currentStepIndex + 1] ? this.steps[this.currentStepIndex + 1].id : null;\r\n        } else {\r\n            stepID = this.steps[this.currentStepIndex - 1] ? this.steps[this.currentStepIndex - 1].id : null;\r\n        }\r\n        let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : '';\r\n\r\n        return stepRoute;\r\n    }\r\n\r\n    updatePosition(stepName: string, position: string) {\r\n        let index = this.getStepIndex(stepName);\r\n        if (this.steps[index].step) {\r\n            this.steps[index].step.position = position;\r\n            this.stepHasBeenModified.next(this.steps[index].step);\r\n        } else {\r\n            this.logger.warn(\r\n                `Trying to modify the position of ${stepName} to ${position}. Step not found!Is this step located in a different route?`\r\n            );\r\n        }\r\n    }\r\n    getStepNumber(stepName: string): number {\r\n        return this.getStepIndex(stepName) + 1;\r\n    }\r\n\r\n    getStepsCount() {\r\n        let stepsOrder = this.stepOptions.getStepsOrder();\r\n        return stepsOrder.length;\r\n    }\r\n\r\n    private getStepIndex(stepName: string): number {\r\n        const index = this.steps\r\n            .map(step => (step.id.includes(ROUTE_SEPARATOR) ? step.id.split(ROUTE_SEPARATOR)[0] : step.id))\r\n            .findIndex(name => stepName === name);\r\n        if (index === -1) throw new JoyrideError(`The step with name: ${stepName} does not exist in the step list.`);\r\n        return index;\r\n    }\r\n\r\n    private getStepName(stepID: string): string {\r\n        let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\r\n        return stepName;\r\n    }\r\n}\r\n","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class DomRefService {\r\n    private fakeDocument: Document = <Document>{ body: {}, documentElement: {} };\r\n    private fakeWindow: Window = <Window>{ document: this.fakeDocument, navigator: {} };\r\n    constructor(@Inject(PLATFORM_ID) private platformId: Object) {}\r\n    getNativeWindow(): Window {\r\n        if (isPlatformBrowser(this.platformId)) return window;\r\n        else return this.fakeWindow;\r\n    }\r\n\r\n    getNativeDocument() {\r\n        if (isPlatformBrowser(this.platformId)) return document;\r\n        else return this.fakeDocument;\r\n    }\r\n}","import { Injectable, TemplateRef } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class TemplatesService {\r\n    private _prevButton: TemplateRef<any>;\r\n    private _nextButton: TemplateRef<any>;\r\n    private _doneButton: TemplateRef<any>;\r\n    private _counter: TemplateRef<any>;\r\n\r\n    setPrevButton(template: TemplateRef<any>) {\r\n        this._prevButton = template;\r\n    }\r\n\r\n    getPrevButton() {\r\n        return this._prevButton;\r\n    }\r\n\r\n    setNextButton(template: TemplateRef<any>) {\r\n        this._nextButton = template;\r\n    }\r\n\r\n    getNextButton() {\r\n        return this._nextButton;\r\n    }\r\n\r\n    setDoneButton(template: TemplateRef<any>) {\r\n        this._doneButton = template;\r\n    }\r\n\r\n    getDoneButton() {\r\n        return this._doneButton;\r\n    }\r\n    setCounter(template: TemplateRef<any>) {\r\n        this._counter = template;\r\n    }\r\n\r\n    getCounter() {\r\n        return this._counter;\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    ElementRef,\r\n    AfterViewInit,\r\n    Input,\r\n    ViewContainerRef,\r\n    TemplateRef,\r\n    Output,\r\n    EventEmitter,\r\n    Inject,\r\n    PLATFORM_ID,\r\n    OnChanges,\r\n    SimpleChanges,\r\n    OnDestroy\r\n} from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { JoyrideStepsContainerService } from '../services/joyride-steps-container.service';\r\nimport { JoyrideError } from '../models/joyride-error.class';\r\nimport { Router } from '@angular/router';\r\nimport { DomRefService } from '../services/dom.service';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { TemplatesService } from '../services/templates.service';\r\nimport { Observable, Subscription } from 'rxjs';\r\n\r\nexport const NO_POSITION = 'NO_POSITION';\r\n\r\n@Directive({\r\n    selector: 'joyrideStep, [joyrideStep]'\r\n})\r\nexport class JoyrideDirective implements AfterViewInit, OnChanges, OnDestroy {\r\n    @Input('joyrideStep')\r\n    name: string;\r\n\r\n    @Input()\r\n    nextStep?: string;\r\n\r\n    @Input()\r\n    title?: string | Observable<string>;\r\n\r\n    @Input()\r\n    text?: string | Observable<string>;\r\n\r\n    @Input()\r\n    stepPosition?: string = NO_POSITION;\r\n\r\n    @Input()\r\n    stepContent?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    stepContentParams?: Object;\r\n\r\n    @Input()\r\n    prevTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    nextTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    doneTemplate?: TemplateRef<any>;\r\n\r\n    @Input()\r\n    counterTemplate?: TemplateRef<any>;\r\n\r\n    @Output()\r\n    prev?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    next?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    done?: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    private windowRef: Window;\r\n    private step: JoyrideStep;\r\n    private subscriptions: Subscription[] = [];\r\n\r\n    constructor(\r\n        private readonly joyrideStepsContainer: JoyrideStepsContainerService,\r\n        private viewContainerRef: ViewContainerRef,\r\n        private readonly domService: DomRefService,\r\n        private readonly router: Router,\r\n        private readonly templateService: TemplatesService,\r\n        @Inject(PLATFORM_ID) private platformId: Object\r\n    ) {\r\n        this.windowRef = this.domService.getNativeWindow();\r\n        this.step = new JoyrideStep();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (!isPlatformBrowser(this.platformId)) return;\r\n        if (this.prevTemplate) this.templateService.setPrevButton(this.prevTemplate);\r\n        if (this.nextTemplate) this.templateService.setNextButton(this.nextTemplate);\r\n        if (this.doneTemplate) this.templateService.setDoneButton(this.doneTemplate);\r\n        if (this.counterTemplate) this.templateService.setCounter(this.counterTemplate);\r\n        this.step.position = this.stepPosition;\r\n        this.step.targetViewContainer = this.viewContainerRef;\r\n        this.setAsyncFields(this.step);\r\n        this.step.stepContent = this.stepContent;\r\n        this.step.stepContentParams = this.stepContentParams;\r\n        this.step.nextClicked = this.next;\r\n        this.step.prevCliked = this.prev;\r\n        this.step.tourDone = this.done;\r\n        if (!this.name) throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\r\n        this.step.name = this.name;\r\n        this.step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\r\n        this.step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\r\n        this.step.isElementOrAncestorFixed =\r\n            this.isElementFixed(this.viewContainerRef.element) ||\r\n            this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\r\n\r\n        this.joyrideStepsContainer.addStep(this.step);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes['title'] || changes['text']) {\r\n            this.setAsyncFields(this.step);\r\n        }\r\n    }\r\n\r\n    private isElementFixed(element: ElementRef) {\r\n        return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\r\n    }\r\n\r\n    private setAsyncFields(step: JoyrideStep) {\r\n        if (this.title instanceof Observable) {\r\n            this.subscriptions.push(\r\n                this.title.subscribe(title => {\r\n                    step.title.next(title);\r\n                })\r\n            );\r\n        } else {\r\n            step.title.next(this.title);\r\n        }\r\n        if (this.text instanceof Observable) {\r\n            this.subscriptions.push(\r\n                this.text.subscribe(text => {\r\n                    step.text.next(text);\r\n                })\r\n            );\r\n        } else {\r\n            step.text.next(this.text);\r\n        }\r\n    }\r\n\r\n    private isAncestorsFixed(nativeElement: any): boolean {\r\n        if (!nativeElement || !nativeElement.parentElement) return false;\r\n        let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\r\n        if (nativeElement.nodeName === 'BODY') {\r\n            return isElementFixed;\r\n        }\r\n        if (isElementFixed) return true;\r\n        else return this.isAncestorsFixed(nativeElement.parentElement);\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(sub => {\r\n            sub.unsubscribe();\r\n        });\r\n    }\r\n}\r\n","import { Injectable, ElementRef } from '@angular/core';\r\nimport { DomRefService } from './dom.service';\r\n\r\nexport interface IDocumentService {\r\n    getElementFixedTop(elementRef: ElementRef): number;\r\n\r\n    getElementFixedLeft(elementRef: ElementRef);\r\n\r\n    getElementAbsoluteTop(elementRef: ElementRef);\r\n\r\n    getElementAbsoluteLeft(elementRef: ElementRef);\r\n\r\n    setDocumentHeight();\r\n\r\n    getDocumentHeight(): number;\r\n    isParentScrollable(elementRef: ElementRef): boolean;\r\n    isElementBeyondOthers(\r\n        elementRef: ElementRef,\r\n        isElementFixed: boolean,\r\n        keywordToDiscard: string\r\n    ): number;\r\n    scrollToTheTop(elementRef: ElementRef): void;\r\n    scrollToTheBottom(elementRef: ElementRef): void;\r\n}\r\n\r\n@Injectable()\r\nexport class DocumentService implements IDocumentService {\r\n    private documentHeight: number;\r\n\r\n    constructor(private readonly DOMService: DomRefService) {\r\n        this.setDocumentHeight();\r\n        if (!document.elementsFromPoint) {\r\n            // IE 11 - Edge browsers\r\n            document.elementsFromPoint = this.elementsFromPoint.bind(this);\r\n        }\r\n    }\r\n\r\n    getElementFixedTop(elementRef: ElementRef) {\r\n        return elementRef.nativeElement.getBoundingClientRect().top;\r\n    }\r\n\r\n    getElementFixedLeft(elementRef: ElementRef) {\r\n        return elementRef.nativeElement.getBoundingClientRect().left;\r\n    }\r\n\r\n    getElementAbsoluteTop(elementRef: ElementRef) {\r\n        const scrollOffsets = this.getScrollOffsets();\r\n        return (\r\n            elementRef.nativeElement.getBoundingClientRect().top +\r\n            scrollOffsets.y\r\n        );\r\n    }\r\n\r\n    getElementAbsoluteLeft(elementRef: ElementRef) {\r\n        const scrollOffsets = this.getScrollOffsets();\r\n        return (\r\n            elementRef.nativeElement.getBoundingClientRect().left +\r\n            scrollOffsets.x\r\n        );\r\n    }\r\n\r\n    setDocumentHeight() {\r\n        this.documentHeight = this.calculateDocumentHeight();\r\n    }\r\n\r\n    getDocumentHeight() {\r\n        return this.documentHeight;\r\n    }\r\n\r\n    isParentScrollable(elementRef: ElementRef): boolean {\r\n        return (\r\n            this.getFirstScrollableParent(elementRef.nativeElement) !==\r\n            this.DOMService.getNativeDocument().body\r\n        );\r\n    }\r\n\r\n    isElementBeyondOthers(\r\n        elementRef: ElementRef,\r\n        isElementFixed: boolean,\r\n        keywordToDiscard: string\r\n    ) {\r\n        const x1 = isElementFixed\r\n            ? this.getElementFixedLeft(elementRef)\r\n            : this.getElementAbsoluteLeft(elementRef);\r\n        const y1 = isElementFixed\r\n            ? this.getElementFixedTop(elementRef)\r\n            : this.getElementAbsoluteTop(elementRef);\r\n        const x2 =\r\n            x1 + elementRef.nativeElement.getBoundingClientRect().width - 1;\r\n        const y2 =\r\n            y1 + elementRef.nativeElement.getBoundingClientRect().height - 1;\r\n\r\n        const elements1 = this.DOMService.getNativeDocument().elementsFromPoint(\r\n            x1,\r\n            y1\r\n        );\r\n        const elements2 = this.DOMService.getNativeDocument().elementsFromPoint(\r\n            x2,\r\n            y2\r\n        );\r\n\r\n        if (elements1.length === 0 && elements2.length === 0) return 1;\r\n        if (\r\n            this.getFirstElementWithoutKeyword(elements1, keywordToDiscard) !==\r\n                elementRef.nativeElement ||\r\n            this.getFirstElementWithoutKeyword(elements2, keywordToDiscard) !==\r\n                elementRef.nativeElement\r\n        ) {\r\n            return 2;\r\n        }\r\n        return 3;\r\n    }\r\n\r\n    scrollIntoView(elementRef: ElementRef, isElementFixed: boolean): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(\r\n            elementRef.nativeElement\r\n        );\r\n        const top = isElementFixed\r\n            ? this.getElementFixedTop(elementRef)\r\n            : this.getElementAbsoluteTop(elementRef);\r\n        if (\r\n            firstScrollableParent !== this.DOMService.getNativeDocument().body\r\n        ) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(0, top - 150);\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop = top - 150;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(0, top - 150);\r\n        }\r\n    }\r\n\r\n    scrollToTheTop(elementRef: ElementRef): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(\r\n            elementRef.nativeElement\r\n        );\r\n        if (\r\n            firstScrollableParent !== this.DOMService.getNativeDocument().body\r\n        ) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(0, 0);\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop = 0;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(0, 0);\r\n        }\r\n    }\r\n\r\n    scrollToTheBottom(elementRef: ElementRef): void {\r\n        const firstScrollableParent = this.getFirstScrollableParent(\r\n            elementRef.nativeElement\r\n        );\r\n        if (\r\n            firstScrollableParent !== this.DOMService.getNativeDocument().body\r\n        ) {\r\n            if (firstScrollableParent.scrollTo) {\r\n                firstScrollableParent.scrollTo(\r\n                    0,\r\n                    this.DOMService.getNativeDocument().body.scrollHeight\r\n                );\r\n            } else {\r\n                // IE 11 - Edge browsers\r\n                firstScrollableParent.scrollTop =\r\n                    firstScrollableParent.scrollHeight -\r\n                    firstScrollableParent.clientHeight;\r\n            }\r\n        } else {\r\n            this.DOMService.getNativeWindow().scrollTo(\r\n                0,\r\n                this.DOMService.getNativeDocument().body.scrollHeight\r\n            );\r\n        }\r\n    }\r\n\r\n    private getFirstScrollableParent(node: any) {\r\n        const regex = /(auto|scroll|overlay)/;\r\n\r\n        const style = (node: any, prop: any) =>\r\n            this.DOMService.getNativeWindow()\r\n                .getComputedStyle(node, null)\r\n                .getPropertyValue(prop);\r\n\r\n        const scroll = (node: any) =>\r\n            regex.test(\r\n                style(node, 'overflow') +\r\n                    style(node, 'overflow-y') +\r\n                    style(node, 'overflow-x')\r\n            );\r\n\r\n        const scrollparent = (node: any): any => {\r\n            return !node || node === this.DOMService.getNativeDocument().body\r\n                ? this.DOMService.getNativeDocument().body\r\n                : scroll(node)\r\n                ? node\r\n                : scrollparent(node.parentNode);\r\n        };\r\n\r\n        return scrollparent(node);\r\n    }\r\n\r\n    private calculateDocumentHeight() {\r\n        const documentRef = this.DOMService.getNativeDocument();\r\n        return Math.max(\r\n            documentRef.body.scrollHeight,\r\n            documentRef.documentElement.scrollHeight,\r\n            documentRef.body.offsetHeight,\r\n            documentRef.documentElement.offsetHeight,\r\n            documentRef.body.clientHeight,\r\n            documentRef.documentElement.clientHeight\r\n        );\r\n    }\r\n\r\n    private getScrollOffsets() {\r\n        const winReference = this.DOMService.getNativeWindow();\r\n        const docReference = this.DOMService.getNativeDocument();\r\n\r\n        // This works for all browsers except IE versions 8 and before\r\n        if (winReference.pageXOffset != null)\r\n            return { x: winReference.pageXOffset, y: winReference.pageYOffset };\r\n\r\n        // For IE (or any browser) in Standards mode\r\n        if (docReference.compatMode == 'CSS1Compat')\r\n            return {\r\n                x: docReference.documentElement.scrollLeft,\r\n                y: docReference.documentElement.scrollTop\r\n            };\r\n\r\n        // For browsers in Quirks mode\r\n        return {\r\n            x: docReference.body.scrollLeft,\r\n            y: docReference.body.scrollTop\r\n        };\r\n    }\r\n\r\n    private elementsFromPoint(x, y) {\r\n        var parents = [];\r\n        var parent = void 0;\r\n        do {\r\n            const elem = this.DOMService.getNativeDocument().elementFromPoint(\r\n                x,\r\n                y\r\n            );\r\n            if (elem && parent !== elem) {\r\n                parent = elem;\r\n                parents.push(parent);\r\n                parent.style.pointerEvents = 'none';\r\n            } else {\r\n                parent = false;\r\n            }\r\n        } while (parent);\r\n        parents.forEach(function(parent) {\r\n            return (parent.style.pointerEvents = 'all');\r\n        });\r\n        return parents;\r\n    }\r\n\r\n    private getFirstElementWithoutKeyword(\r\n        elements: Element[],\r\n        keyword: string\r\n    ): Element {\r\n        while (\r\n            elements[0] &&\r\n            elements[0].classList.toString().includes(keyword)\r\n        ) {\r\n            elements.shift();\r\n        }\r\n        return elements[0];\r\n    }\r\n}\r\n","import { Injectable, Renderer2, RendererFactory2, ViewContainerRef } from '@angular/core';\r\nimport { DocumentService } from './document.service';\r\nimport { Scroll } from './event-listener.service';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\n\r\n@Injectable()\r\nexport class JoyrideBackdropService {\r\n    private renderer: Renderer2;\r\n    private currentBackdropContainer: any;\r\n    private lastBackdropContainer: any;\r\n    private backdropContent: any;\r\n    private backdropTop: any;\r\n    private backdropBottom: any;\r\n    private backdropMiddleContainer: any;\r\n    private backdropMiddleContent: any;\r\n    private leftBackdrop: any;\r\n    private targetBackdrop: any;\r\n    private rightBackdrop: any;\r\n    private elementRef: ViewContainerRef;\r\n    private targetAbsoluteTop: number;\r\n    private targetAbsoluteLeft: number;\r\n    private lastXScroll: number = 0;\r\n    private lastYScroll: number = 0;\r\n\r\n    constructor(\r\n        private readonly documentService: DocumentService,\r\n        private readonly optionsService: JoyrideOptionsService,\r\n        private readonly rendererFactory: RendererFactory2\r\n    ) {\r\n        this.setRenderer();\r\n    }\r\n\r\n    private setRenderer() {\r\n        this.renderer = this.rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    draw(step: JoyrideStep) {\r\n        this.elementRef = step.targetViewContainer;\r\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\r\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\r\n\r\n        this.currentBackdropContainer = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.currentBackdropContainer, 'backdrop-container');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'position', 'fixed');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'top', '0px');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'left', '0px');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'width', '100%');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'height', '100%');\r\n        this.renderer.setStyle(this.currentBackdropContainer, 'z-index', '1000');\r\n        this.renderer.setAttribute(this.currentBackdropContainer, 'id', 'backdrop-' + step.name);\r\n\r\n        this.backdropContent = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropContent, 'backdrop-content');\r\n        this.renderer.setStyle(this.backdropContent, 'position', 'relative');\r\n        this.renderer.setStyle(this.backdropContent, 'height', '100%');\r\n        this.renderer.setStyle(this.backdropContent, 'display', 'flex');\r\n        this.renderer.setStyle(this.backdropContent, 'flex-direction', 'column');\r\n        this.renderer.appendChild(this.currentBackdropContainer, this.backdropContent);\r\n\r\n        this.backdropTop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropTop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.backdropTop, 'backdrop-top');\r\n        this.renderer.setStyle(this.backdropTop, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropTop, 'height', this.targetAbsoluteTop - this.lastYScroll + 'px');\r\n        this.renderer.setStyle(this.backdropTop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.backdropTop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropContent, this.backdropTop);\r\n\r\n        this.backdropMiddleContainer = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropMiddleContainer, 'backdrop-middle-container');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropMiddleContainer, 'flex-shrink', '0');\r\n        this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\r\n\r\n        this.backdropMiddleContent = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropMiddleContent, 'backdrop-middle-content');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'display', 'flex');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropMiddleContent, 'height', '100%');\r\n        this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\r\n\r\n        this.leftBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.leftBackdrop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.leftBackdrop, 'backdrop-left');\r\n        this.renderer.setStyle(this.leftBackdrop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.leftBackdrop, 'width', this.targetAbsoluteLeft - this.lastXScroll + 'px');\r\n        this.renderer.setStyle(this.leftBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\r\n\r\n        this.targetBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.targetBackdrop, 'backdrop-target');\r\n        this.renderer.setStyle(this.targetBackdrop, 'flex-shrink', '0');\r\n        this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\r\n\r\n        this.rightBackdrop = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.rightBackdrop, 'joyride-backdrop');\r\n        this.renderer.addClass(this.rightBackdrop, 'backdrop-right');\r\n        this.renderer.setStyle(this.rightBackdrop, 'width', '100%');\r\n        this.renderer.setStyle(this.rightBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\r\n\r\n        this.backdropBottom = this.renderer.createElement('div');\r\n        this.renderer.addClass(this.backdropBottom, 'joyride-backdrop');\r\n        this.renderer.addClass(this.backdropBottom, 'backdrop-bottom');\r\n        this.renderer.setStyle(this.backdropBottom, 'width', '100%');\r\n        this.renderer.setStyle(this.backdropBottom, 'height', '100%');\r\n        this.renderer.setStyle(this.backdropBottom, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\r\n        this.renderer.appendChild(this.backdropContent, this.backdropBottom);\r\n\r\n        this.removeLastBackdrop();\r\n        this.drawCurrentBackdrop();\r\n        this.lastBackdropContainer = this.currentBackdropContainer;\r\n    }\r\n\r\n    remove() {\r\n        this.removeLastBackdrop();\r\n    }\r\n\r\n    redrawTarget(step: JoyrideStep) {\r\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\r\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\r\n        this.handleVerticalScroll(step);\r\n        this.handleHorizontalScroll(step);\r\n    }\r\n\r\n    private getTargetTotalTop(step: JoyrideStep) {\r\n        let targetVC = step.targetViewContainer;\r\n        return step.isElementOrAncestorFixed\r\n            ? this.documentService.getElementFixedTop(targetVC.element)\r\n            : this.documentService.getElementAbsoluteTop(targetVC.element);\r\n    }\r\n\r\n    private getTargetTotalLeft(step: JoyrideStep) {\r\n        let targetVC = step.targetViewContainer;\r\n\r\n        return step.isElementOrAncestorFixed\r\n            ? this.documentService.getElementFixedLeft(targetVC.element)\r\n            : this.documentService.getElementAbsoluteLeft(targetVC.element);\r\n    }\r\n    redraw(step: JoyrideStep, scroll: Scroll) {\r\n        if (this.lastYScroll !== scroll.scrollY) {\r\n            this.lastYScroll = scroll.scrollY;\r\n            if (this.elementRef) {\r\n                this.handleVerticalScroll(step);\r\n            }\r\n        }\r\n        if (this.lastXScroll !== scroll.scrollX) {\r\n            this.lastXScroll = scroll.scrollX;\r\n            if (this.elementRef) {\r\n                this.handleHorizontalScroll(step);\r\n            }\r\n        }\r\n    }\r\n\r\n    private handleHorizontalScroll(step: JoyrideStep) {\r\n        let newBackdropLeftWidth = step.isElementOrAncestorFixed ? this.targetAbsoluteLeft : this.targetAbsoluteLeft - this.lastXScroll;\r\n\r\n        if (newBackdropLeftWidth >= 0) {\r\n            this.renderer.setStyle(this.leftBackdrop, 'width', newBackdropLeftWidth + 'px');\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\r\n        } else {\r\n            this.handleTargetPartialWidth(newBackdropLeftWidth);\r\n        }\r\n    }\r\n\r\n    private handleTargetPartialWidth(newBackdropLeftWidth: number) {\r\n        this.renderer.setStyle(this.leftBackdrop, 'width', 0 + 'px');\r\n        let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\r\n        if (visibleTargetWidth >= 0) {\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', visibleTargetWidth + 'px');\r\n        } else {\r\n            this.renderer.setStyle(this.targetBackdrop, 'width', 0 + 'px');\r\n        }\r\n    }\r\n\r\n    private handleVerticalScroll(step: JoyrideStep) {\r\n        let newBackdropTopHeight = step.isElementOrAncestorFixed ? this.targetAbsoluteTop : this.targetAbsoluteTop - this.lastYScroll;\r\n\r\n        if (newBackdropTopHeight >= 0) {\r\n            this.renderer.setStyle(this.backdropTop, 'height', newBackdropTopHeight + 'px');\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\r\n        } else {\r\n            this.handleTargetPartialHeight(newBackdropTopHeight);\r\n        }\r\n    }\r\n\r\n    private handleTargetPartialHeight(newBackdropTopHeight: number) {\r\n        this.renderer.setStyle(this.backdropTop, 'height', 0 + 'px');\r\n        let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\r\n        if (visibleTargetHeight >= 0) {\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', visibleTargetHeight + 'px');\r\n        } else {\r\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', 0 + 'px');\r\n        }\r\n    }\r\n\r\n    private removeLastBackdrop() {\r\n        if (this.lastBackdropContainer) {\r\n            this.renderer.removeChild(document.body, this.lastBackdropContainer);\r\n            this.lastBackdropContainer = undefined;\r\n        }\r\n    }\r\n\r\n    private drawCurrentBackdrop() {\r\n        this.renderer.appendChild(document.body, this.currentBackdropContainer);\r\n    }\r\n}\r\n","import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { DomRefService } from './dom.service';\r\n\r\nexport class Scroll {\r\n    scrollX: number;\r\n    scrollY: number;\r\n}\r\n\r\n@Injectable()\r\nexport class EventListenerService {\r\n    private renderer: Renderer2;\r\n    private scrollUnlisten: any;\r\n    private resizeUnlisten: any;\r\n\r\n    scrollEvent: Subject<Scroll> = new Subject<Scroll>();\r\n    resizeEvent: Subject<number> = new Subject<number>();\r\n\r\n    constructor(private readonly rendererFactory: RendererFactory2, private readonly DOMService: DomRefService) {\r\n        this.renderer = rendererFactory.createRenderer(null, null);\r\n    }\r\n\r\n    startListeningScrollEvents() {\r\n        this.scrollUnlisten = this.renderer.listen('document', 'scroll', evt => {\r\n            this.scrollEvent.next({\r\n                scrollX: this.DOMService.getNativeWindow().pageXOffset,\r\n                scrollY: this.DOMService.getNativeWindow().pageYOffset\r\n            });\r\n        });\r\n    }\r\n\r\n    startListeningResizeEvents() {\r\n        this.resizeUnlisten = this.renderer.listen('window', 'resize', evt => {\r\n            this.resizeEvent.next(evt);\r\n        });\r\n    }\r\n\r\n    stopListeningScrollEvents() {\r\n        this.scrollUnlisten();\r\n    }\r\n\r\n    stopListeningResizeEvents() {\r\n        this.resizeUnlisten();\r\n    }\r\n}\r\n","import {\r\n    Component,\r\n    Input,\r\n    AfterViewInit,\r\n    ViewEncapsulation,\r\n    OnInit,\r\n    OnDestroy,\r\n    ElementRef,\r\n    ViewChild,\r\n    Renderer2,\r\n    Injector,\r\n    TemplateRef\r\n} from '@angular/core';\r\nimport { JoyrideStep } from '../../models/joyride-step.class';\r\nimport {\r\n    JoyrideStepService,\r\n    ARROW_SIZE,\r\n    DISTANCE_FROM_TARGET,\r\n    IJoyrideStepService\r\n} from '../../services';\r\nimport { JoyrideStepsContainerService } from '../../services/joyride-steps-container.service';\r\nimport { EventListenerService } from '../../services/event-listener.service';\r\nimport { Subscription, Observable } from 'rxjs';\r\nimport { DocumentService } from '../../services/document.service';\r\nimport { JoyrideOptionsService } from '../../services/joyride-options.service';\r\nimport { LoggerService } from '../../services/logger.service';\r\nimport { TemplatesService } from '../../services/templates.service';\r\n\r\nconst STEP_MIN_WIDTH = 200;\r\nconst STEP_MAX_WIDTH = 400;\r\nconst CUSTOM_STEP_MAX_WIDTH_VW = 90;\r\nconst STEP_HEIGHT = 200;\r\nconst ASPECT_RATIO = 1.212;\r\nexport const DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\r\nexport const DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\r\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\r\n\r\n@Component({\r\n    selector: 'joyride-step',\r\n    templateUrl: './joyride-step.component.html',\r\n    styleUrls: ['./joyride-step.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class JoyrideStepComponent implements OnInit, OnDestroy, AfterViewInit {\r\n    stepWidth: number = STEP_MIN_WIDTH;\r\n    stepHeight: number = STEP_HEIGHT;\r\n    leftPosition: number;\r\n    topPosition: number;\r\n    showArrow = true;\r\n    arrowPosition: string;\r\n    arrowLeftPosition: number;\r\n    arrowTopPosition: number;\r\n    title: Observable<string>;\r\n    text: Observable<string>;\r\n    counter: string;\r\n    isCounterVisible: boolean;\r\n    isPrevButtonVisible: boolean;\r\n    themeColor: string;\r\n    customContent: TemplateRef<any>;\r\n    customPrevButton: TemplateRef<any>;\r\n    customNextButton: TemplateRef<any>;\r\n    customDoneButton: TemplateRef<any>;\r\n    customCounter: TemplateRef<any>;\r\n    counterData: any;\r\n    ctx: Object;\r\n\r\n    private arrowSize: number = ARROW_SIZE;\r\n    private stepAbsoluteLeft: number;\r\n    private stepAbsoluteTop: number;\r\n    private targetWidth: number;\r\n    targetHeight: number;\r\n    private targetAbsoluteLeft: number;\r\n    private targetAbsoluteTop: number;\r\n\r\n    private subscriptions: Subscription[] = [];\r\n    joyrideStepService: IJoyrideStepService;\r\n\r\n    private positionAlreadyFixed: boolean;\r\n    private documentHeight: number;\r\n\r\n    prevText: Observable<string>;\r\n    nextText: Observable<string>;\r\n    doneText: Observable<string>;\r\n\r\n    @Input() step?: JoyrideStep;\r\n    @ViewChild('stepHolder', { static: true }) stepHolder: ElementRef;\r\n    @ViewChild('stepContainer', { static: true }) stepContainer: ElementRef;\r\n\r\n    constructor(\r\n        private injector: Injector,\r\n        private readonly stepsContainerService: JoyrideStepsContainerService,\r\n        private readonly eventListenerService: EventListenerService,\r\n        private readonly documentService: DocumentService,\r\n        private readonly renderer: Renderer2,\r\n        private readonly logger: LoggerService,\r\n        private readonly optionsService: JoyrideOptionsService,\r\n        private readonly templateService: TemplatesService\r\n    ) {}\r\n\r\n    ngOnInit(): void {\r\n        // Need to Inject here otherwise you will obtain a circular dependency\r\n        this.joyrideStepService = this.injector.get(JoyrideStepService);\r\n\r\n        this.documentHeight = this.documentService.getDocumentHeight();\r\n        this.subscriptions.push(this.subscribeToResizeEvents());\r\n        this.title = this.step.title.asObservable();\r\n        this.text = this.step.text.asObservable();\r\n\r\n        this.setCustomTemplates();\r\n        this.setCustomTexts();\r\n\r\n        this.counter = this.getCounter();\r\n        this.isCounterVisible = this.optionsService.isCounterVisible();\r\n        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\r\n        this.themeColor = this.optionsService.getThemeColor();\r\n\r\n        if (this.text) this.text.subscribe(val => this.checkRedraw(val));\r\n        if (this.title) this.title.subscribe(val => this.checkRedraw(val));\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.isCustomized()) {\r\n            this.renderer.setStyle(\r\n                this.stepContainer.nativeElement,\r\n                'max-width',\r\n                CUSTOM_STEP_MAX_WIDTH_VW + 'vw'\r\n            );\r\n            this.updateStepDimensions();\r\n        } else {\r\n            this.renderer.setStyle(\r\n                this.stepContainer.nativeElement,\r\n                'max-width',\r\n                STEP_MAX_WIDTH + 'px'\r\n            );\r\n            let dimensions = this.getDimensionsByAspectRatio(\r\n                this.stepContainer.nativeElement.clientWidth,\r\n                this.stepContainer.nativeElement.clientHeight,\r\n                ASPECT_RATIO\r\n            );\r\n            dimensions = this.adjustDimensions(\r\n                dimensions.width,\r\n                dimensions.height\r\n            );\r\n            this.stepWidth = dimensions.width;\r\n            this.stepHeight = dimensions.height;\r\n            this.renderer.setStyle(\r\n                this.stepContainer.nativeElement,\r\n                'width',\r\n                this.stepWidth + 'px'\r\n            );\r\n            this.renderer.setStyle(\r\n                this.stepContainer.nativeElement,\r\n                'height',\r\n                this.stepHeight + 'px'\r\n            );\r\n        }\r\n        this.drawStep();\r\n    }\r\n\r\n    private checkRedraw(val) {\r\n        if (val != null) {\r\n            // Need to wait that the change is rendered before redrawing\r\n            setTimeout(() => {\r\n                this.redrawStep();\r\n            }, 2);\r\n        }\r\n    }\r\n\r\n    private isCustomized() {\r\n        return (\r\n            this.step.stepContent ||\r\n            this.templateService.getCounter() ||\r\n            this.templateService.getPrevButton() ||\r\n            this.templateService.getNextButton() ||\r\n            this.templateService.getDoneButton()\r\n        );\r\n    }\r\n\r\n    private setCustomTexts() {\r\n        const customeTexts = this.optionsService.getCustomTexts();\r\n        this.prevText = customeTexts.prev;\r\n        this.nextText = customeTexts.next;\r\n        this.doneText = customeTexts.done;\r\n    }\r\n\r\n    private drawStep() {\r\n        let position = this.step.isElementOrAncestorFixed\r\n            ? 'fixed'\r\n            : 'absolute';\r\n        this.renderer.setStyle(\r\n            this.stepHolder.nativeElement,\r\n            'position',\r\n            position\r\n        );\r\n        this.renderer.setStyle(\r\n            this.stepHolder.nativeElement,\r\n            'transform',\r\n            this.step.transformCssStyle\r\n        );\r\n        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\r\n        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\r\n        this.targetAbsoluteLeft =\r\n            position === 'fixed'\r\n                ? this.documentService.getElementFixedLeft(\r\n                      this.step.targetViewContainer.element\r\n                  )\r\n                : this.documentService.getElementAbsoluteLeft(\r\n                      this.step.targetViewContainer.element\r\n                  );\r\n        this.targetAbsoluteTop =\r\n            position === 'fixed'\r\n                ? this.documentService.getElementFixedTop(\r\n                      this.step.targetViewContainer.element\r\n                  )\r\n                : this.documentService.getElementAbsoluteTop(\r\n                      this.step.targetViewContainer.element\r\n                  );\r\n        this.setStepStyle();\r\n    }\r\n\r\n    private getCounter(): string {\r\n        let stepPosition = this.stepsContainerService.getStepNumber(\r\n            this.step.name\r\n        );\r\n        let numberOfSteps = this.stepsContainerService.getStepsCount();\r\n        this.counterData = { step: stepPosition, total: numberOfSteps };\r\n        return stepPosition + '/' + numberOfSteps;\r\n    }\r\n\r\n    private setCustomTemplates() {\r\n        this.customContent = this.step.stepContent;\r\n        this.ctx = this.step.stepContentParams;\r\n        this.customPrevButton = this.templateService.getPrevButton();\r\n        this.customNextButton = this.templateService.getNextButton();\r\n        this.customDoneButton = this.templateService.getDoneButton();\r\n        this.customCounter = this.templateService.getCounter();\r\n    }\r\n\r\n    prev() {\r\n        this.joyrideStepService.prev();\r\n    }\r\n\r\n    next() {\r\n        this.joyrideStepService.next();\r\n    }\r\n\r\n    close() {\r\n        this.joyrideStepService.close();\r\n    }\r\n\r\n    isFirstStep() {\r\n        return this.stepsContainerService.getStepNumber(this.step.name) === 1;\r\n    }\r\n\r\n    isLastStep() {\r\n        return (\r\n            this.stepsContainerService.getStepNumber(this.step.name) ===\r\n            this.stepsContainerService.getStepsCount()\r\n        );\r\n    }\r\n\r\n    private setStepStyle() {\r\n        switch (this.step.position) {\r\n            case 'top': {\r\n                this.setStyleTop();\r\n                break;\r\n            }\r\n            case 'bottom': {\r\n                this.setStyleBottom();\r\n                break;\r\n            }\r\n            case 'right': {\r\n                this.setStyleRight();\r\n                break;\r\n            }\r\n            case 'left': {\r\n                this.setStyleLeft();\r\n                break;\r\n            }\r\n            case 'center': {\r\n                this.setStyleCenter();\r\n                break;\r\n            }\r\n            default: {\r\n                this.setStyleBottom();\r\n            }\r\n        }\r\n    }\r\n\r\n    private setStyleTop() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'top');\r\n        this.topPosition =\r\n            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\r\n        this.stepAbsoluteTop =\r\n            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\r\n        this.arrowTopPosition = this.stepHeight;\r\n\r\n        this.leftPosition =\r\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.stepAbsoluteLeft =\r\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\r\n        this.adjustLeftPosition();\r\n        this.adjustRightPosition();\r\n        this.arrowPosition = 'bottom';\r\n        this.autofixTopPosition();\r\n    }\r\n\r\n    private setStyleRight() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'right');\r\n        this.topPosition =\r\n            this.targetAbsoluteTop +\r\n            this.targetHeight / 2 -\r\n            this.stepHeight / 2;\r\n        this.stepAbsoluteTop =\r\n            this.targetAbsoluteTop +\r\n            this.targetHeight / 2 -\r\n            this.stepHeight / 2;\r\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\r\n\r\n        this.leftPosition =\r\n            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteLeft =\r\n            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\r\n        this.arrowLeftPosition = -this.arrowSize;\r\n        this.adjustTopPosition();\r\n        this.adjustBottomPosition();\r\n        this.arrowPosition = 'left';\r\n        this.autofixRightPosition();\r\n    }\r\n\r\n    private setStyleBottom() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'bottom');\r\n        this.topPosition =\r\n            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteTop =\r\n            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\r\n        this.arrowTopPosition = -this.arrowSize;\r\n\r\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\r\n        this.leftPosition =\r\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.stepAbsoluteLeft =\r\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\r\n        this.adjustLeftPosition();\r\n        this.adjustRightPosition();\r\n        this.arrowPosition = 'top';\r\n        this.autofixBottomPosition();\r\n    }\r\n\r\n    private setStyleLeft() {\r\n        this.stepsContainerService.updatePosition(this.step.name, 'left');\r\n        this.topPosition =\r\n            this.targetAbsoluteTop +\r\n            this.targetHeight / 2 -\r\n            this.stepHeight / 2;\r\n        this.stepAbsoluteTop =\r\n            this.targetAbsoluteTop +\r\n            this.targetHeight / 2 -\r\n            this.stepHeight / 2;\r\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\r\n\r\n        this.leftPosition =\r\n            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\r\n        this.stepAbsoluteLeft =\r\n            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\r\n        this.arrowLeftPosition = this.stepWidth;\r\n        this.adjustTopPosition();\r\n        this.adjustBottomPosition();\r\n        this.arrowPosition = 'right';\r\n        this.autofixLeftPosition();\r\n    }\r\n\r\n    private setStyleCenter() {\r\n        this.renderer.setStyle(\r\n            this.stepHolder.nativeElement,\r\n            'position',\r\n            'fixed'\r\n        );\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');\r\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');\r\n\r\n        this.updateStepDimensions();\r\n\r\n        this.renderer.setStyle(\r\n            this.stepHolder.nativeElement,\r\n            'transform',\r\n            `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`\r\n        );\r\n        this.showArrow = false;\r\n    }\r\n\r\n    private adjustLeftPosition() {\r\n        if (this.leftPosition < 0) {\r\n            this.arrowLeftPosition =\r\n                this.arrowLeftPosition +\r\n                this.leftPosition -\r\n                DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\r\n            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\r\n        }\r\n    }\r\n\r\n    private adjustRightPosition() {\r\n        let currentWindowWidth = document.body.clientWidth;\r\n        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\r\n            let newLeftPos =\r\n                this.leftPosition -\r\n                (this.stepAbsoluteLeft +\r\n                    this.stepWidth +\r\n                    DEFAULT_DISTANCE_FROM_MARGIN_RIGHT -\r\n                    currentWindowWidth);\r\n            let deltaLeftPosition = newLeftPos - this.leftPosition;\r\n\r\n            this.leftPosition = newLeftPos;\r\n            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\r\n        }\r\n    }\r\n\r\n    private adjustTopPosition() {\r\n        if (this.stepAbsoluteTop < 0) {\r\n            this.arrowTopPosition =\r\n                this.arrowTopPosition +\r\n                this.topPosition -\r\n                DEFAULT_DISTANCE_FROM_MARGIN_TOP;\r\n            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\r\n        }\r\n    }\r\n\r\n    private adjustBottomPosition() {\r\n        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\r\n            let newTopPos =\r\n                this.topPosition -\r\n                (this.stepAbsoluteTop +\r\n                    this.stepHeight +\r\n                    DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM -\r\n                    this.documentHeight);\r\n            let deltaTopPosition = newTopPos - this.topPosition;\r\n\r\n            this.topPosition = newTopPos;\r\n            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\r\n        }\r\n    }\r\n\r\n    private autofixTopPosition() {\r\n        if (this.positionAlreadyFixed) {\r\n            this.logger.warn(\r\n                'No step positions found for this step. The step will be centered.'\r\n            );\r\n        } else if (\r\n            this.targetAbsoluteTop - this.stepHeight - this.arrowSize <\r\n            0\r\n        ) {\r\n            this.positionAlreadyFixed = true;\r\n            this.setStyleRight();\r\n        }\r\n    }\r\n\r\n    private autofixRightPosition() {\r\n        if (\r\n            this.targetAbsoluteLeft +\r\n                this.targetWidth +\r\n                this.stepWidth +\r\n                this.arrowSize >\r\n            document.body.clientWidth\r\n        ) {\r\n            this.setStyleBottom();\r\n        }\r\n    }\r\n\r\n    private autofixBottomPosition() {\r\n        if (\r\n            this.targetAbsoluteTop +\r\n                this.stepHeight +\r\n                this.arrowSize +\r\n                this.targetHeight >\r\n            this.documentHeight\r\n        ) {\r\n            this.setStyleLeft();\r\n        }\r\n    }\r\n\r\n    private autofixLeftPosition() {\r\n        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\r\n            this.setStyleTop();\r\n        }\r\n    }\r\n\r\n    private subscribeToResizeEvents(): Subscription {\r\n        return this.eventListenerService.resizeEvent.subscribe(() => {\r\n            this.redrawStep();\r\n        });\r\n    }\r\n\r\n    private redrawStep() {\r\n        this.updateStepDimensions();\r\n        this.drawStep();\r\n    }\r\n\r\n    private getDimensionsByAspectRatio(\r\n        width: number,\r\n        height: number,\r\n        aspectRatio: number\r\n    ) {\r\n        let calcHeight = (width + height) / (1 + aspectRatio);\r\n        let calcWidth = calcHeight * aspectRatio;\r\n        return {\r\n            width: calcWidth,\r\n            height: calcHeight\r\n        };\r\n    }\r\n    private adjustDimensions(width: number, height: number) {\r\n        let area = width * height;\r\n        let newWidth = width;\r\n        let newHeight = height;\r\n        if (width > STEP_MAX_WIDTH) {\r\n            newWidth = STEP_MAX_WIDTH;\r\n            newHeight = area / newWidth;\r\n        } else if (width < STEP_MIN_WIDTH) {\r\n            newWidth = STEP_MIN_WIDTH;\r\n            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\r\n        }\r\n        return {\r\n            width: newWidth,\r\n            height: newHeight\r\n        };\r\n    }\r\n\r\n    private updateStepDimensions() {\r\n        this.stepWidth = this.stepContainer.nativeElement.clientWidth;\r\n        this.stepHeight = this.stepContainer.nativeElement.clientHeight;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.subscriptions.forEach(subscription => {\r\n            subscription.unsubscribe();\r\n        });\r\n    }\r\n}\r\n","\r\nimport { Component, Input, ViewEncapsulation } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'joyride-arrow',\r\n    templateUrl: './arrow.component.html',\r\n    styleUrls: ['./arrow.component.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class JoyrideArrowComponent {\r\n    @Input()\r\n    position: string = 'top';\r\n}","import { Component, Input, EventEmitter, Output } from \"@angular/core\";\r\n\r\n@Component({\r\n    selector: 'joyride-button',\r\n    templateUrl: './button.component.html',\r\n    styleUrls: ['./button.component.scss']\r\n})\r\nexport class JoyrideButtonComponent {\r\n    hover: boolean;\r\n    \r\n    @Input() \r\n    color: string;\r\n    \r\n    @Output()\r\n    clicked: EventEmitter<any> = new EventEmitter();\r\n\r\n    onClick() {\r\n        this.clicked.emit();\r\n    }\r\n}","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'joy-close-button',\r\n    template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <line x1=\"1\" y1=\"24\" \r\n                    x2=\"24\" y2=\"1\" \r\n                    stroke=\"black\" \r\n                    stroke-width=\"3\"/>\r\n                <line x1=\"1\" y1=\"1\" \r\n                    x2=\"24\" y2=\"24\" \r\n                    stroke=\"black\" \r\n                    stroke-width=\"3\"/>\r\n            </svg>`\r\n})\r\n\r\nexport class JoyrideCloseButtonComponent { }","import {\r\n    Injectable,\r\n    ComponentRef,\r\n    ComponentFactoryResolver,\r\n    ApplicationRef,\r\n    Injector,\r\n    EmbeddedViewRef\r\n} from '@angular/core';\r\nimport { JoyrideStepComponent } from '../components';\r\nimport { JoyrideStep } from '../models';\r\n\r\n@Injectable()\r\nexport class StepDrawerService {\r\n    private refMap: { [key: string]: ComponentRef<JoyrideStepComponent> } = {};\r\n\r\n    constructor(\r\n        private readonly componentFactoryResolver: ComponentFactoryResolver,\r\n        private appRef: ApplicationRef,\r\n        private injector: Injector\r\n    ) {}\r\n\r\n    draw(step: JoyrideStep) {\r\n        // 1. Create a component reference from the component\r\n        const ref: ComponentRef<JoyrideStepComponent> = this.componentFactoryResolver\r\n            .resolveComponentFactory(JoyrideStepComponent)\r\n            .create(this.injector);\r\n\r\n        // 2. Attach component to the appRef so that it's inside the ng component tree\r\n        this.appRef.attachView(ref.hostView);\r\n\r\n        // 3. Get DOM element from component\r\n        const domElem = (ref.hostView as EmbeddedViewRef<any>)\r\n            .rootNodes[0] as HTMLElement;\r\n\r\n        // 4. Append DOM element to the body\r\n        document.body.appendChild(domElem);\r\n\r\n        const instance: JoyrideStepComponent = ref.instance;\r\n        instance.step = step;\r\n        ref.changeDetectorRef.detectChanges();\r\n        step.stepInstance = instance;\r\n\r\n        this.refMap[step.name] = ref;\r\n    }\r\n\r\n    remove(step: JoyrideStep) {\r\n        this.appRef.detachView(this.refMap[step.name].hostView);\r\n        this.refMap[step.name].destroy();\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { JoyrideStep } from '../models/joyride-step.class';\r\nimport { JoyrideBackdropService } from './joyride-backdrop.service';\r\nimport { EventListenerService } from './event-listener.service';\r\nimport { JoyrideStepsContainerService, StepActionType } from './joyride-steps-container.service';\r\nimport { DocumentService } from './document.service';\r\nimport { StepDrawerService } from './step-drawer.service';\r\nimport { DomRefService } from './dom.service';\r\nimport { NO_POSITION } from '../directives/joyride.directive';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { Router } from '@angular/router';\r\nimport { ReplaySubject, Observable } from 'rxjs';\r\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\r\nimport { JoyrideStepDoesNotExist, JoyrideStepOutOfRange } from '../models/joyride-error.class';\r\nimport { LoggerService } from './logger.service';\r\n\r\nconst SCROLLBAR_SIZE = 20;\r\n\r\nexport const DISTANCE_FROM_TARGET = 15;\r\nexport const ARROW_SIZE = 10;\r\n\r\nexport interface IJoyrideStepService {\r\n    startTour(): Observable<JoyrideStepInfo>;\r\n    close(): any;\r\n    prev(): any;\r\n    next(): any;\r\n}\r\n\r\n@Injectable()\r\nexport class JoyrideStepService implements IJoyrideStepService {\r\n    private currentStep: JoyrideStep;\r\n    private winTopPosition: number = 0;\r\n    private winBottomPosition: number = 0;\r\n    private stepsObserver: ReplaySubject<JoyrideStepInfo> = new ReplaySubject<JoyrideStepInfo>();\r\n\r\n    constructor(\r\n        private readonly backDropService: JoyrideBackdropService,\r\n        private readonly eventListener: EventListenerService,\r\n        private readonly stepsContainerService: JoyrideStepsContainerService,\r\n        private readonly documentService: DocumentService,\r\n        private readonly DOMService: DomRefService,\r\n        private readonly stepDrawerService: StepDrawerService,\r\n        private readonly optionsService: JoyrideOptionsService,\r\n        private readonly router: Router,\r\n        private readonly logger: LoggerService\r\n    ) {\r\n        this.initViewportPositions();\r\n        this.subscribeToScrollEvents();\r\n        this.subscribeToResizeEvents();\r\n    }\r\n\r\n    private initViewportPositions() {\r\n        this.winTopPosition = 0;\r\n        this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\r\n    }\r\n\r\n    private subscribeToScrollEvents() {\r\n        this.eventListener.startListeningScrollEvents();\r\n        this.eventListener.scrollEvent.subscribe(scroll => {\r\n            this.winTopPosition = scroll.scrollY;\r\n            this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\r\n            if (this.currentStep) this.backDropService.redraw(this.currentStep, scroll);\r\n        });\r\n    }\r\n\r\n    private subscribeToResizeEvents() {\r\n        this.eventListener.resizeEvent.subscribe(() => {\r\n            if (this.currentStep) this.backDropService.redrawTarget(this.currentStep);\r\n        });\r\n    }\r\n\r\n    private drawStep(step: JoyrideStep) {\r\n        step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\r\n        this.stepDrawerService.draw(step);\r\n    }\r\n\r\n    startTour(): Observable<JoyrideStepInfo> {\r\n        this.stepsObserver = new ReplaySubject<JoyrideStepInfo>();\r\n        this.stepsContainerService.init();\r\n        this.documentService.setDocumentHeight();\r\n\r\n        this.tryShowStep(StepActionType.NEXT);\r\n        this.eventListener.startListeningResizeEvents();\r\n        this.subscribeToStepsUpdates();\r\n        return this.stepsObserver.asObservable();\r\n    }\r\n\r\n    close() {\r\n        this.removeCurrentStep();\r\n        this.notifyTourIsFinished();\r\n        this.DOMService.getNativeWindow().scrollTo(0, 0);\r\n        this.eventListener.stopListeningResizeEvents();\r\n        this.backDropService.remove();\r\n    }\r\n\r\n    prev() {\r\n        this.removeCurrentStep();\r\n        this.currentStep.prevCliked.emit();\r\n        this.tryShowStep(StepActionType.PREV);\r\n    }\r\n\r\n    next() {\r\n        this.removeCurrentStep();\r\n        this.currentStep.nextClicked.emit();\r\n        this.tryShowStep(StepActionType.NEXT);\r\n    }\r\n\r\n    private navigateToStepPage(action: StepActionType) {\r\n        let stepRoute = this.stepsContainerService.getStepRoute(action);\r\n        if (stepRoute) {\r\n            this.router.navigate([stepRoute]);\r\n        }\r\n    }\r\n\r\n    private subscribeToStepsUpdates() {\r\n        this.stepsContainerService.stepHasBeenModified.subscribe(updatedStep => {\r\n            if (this.currentStep && this.currentStep.name === updatedStep.name) {\r\n                this.currentStep = updatedStep;\r\n            }\r\n        });\r\n    }\r\n\r\n    private tryShowStep(actionType: StepActionType) {\r\n        this.navigateToStepPage(actionType);\r\n        const timeout = this.optionsService.getWaitingTime();\r\n        if (timeout > 100) this.backDropService.remove();\r\n        setTimeout(() => {\r\n            try {\r\n                this.showStep(actionType);\r\n            } catch (error) {\r\n                if (error instanceof JoyrideStepDoesNotExist) {\r\n                    this.tryShowStep(actionType);\r\n                } else if (error instanceof JoyrideStepOutOfRange) {\r\n                    this.logger.error('Forcing the tour closure: First or Last step not found in the DOM.');\r\n                    this.close();\r\n                } else {\r\n                    throw new Error(error);\r\n                }\r\n            }\r\n        }, timeout);\r\n    }\r\n\r\n    private showStep(actionType: StepActionType) {\r\n        this.currentStep = this.stepsContainerService.get(actionType);\r\n\r\n        if (this.currentStep == null) throw new JoyrideStepDoesNotExist('');\r\n        // Scroll the element to get it visible if it's in a scrollable element\r\n        this.scrollIfElementBeyondOtherElements();\r\n        this.backDropService.draw(this.currentStep);\r\n        this.drawStep(this.currentStep);\r\n        this.scrollIfStepAndTargetAreNotVisible();\r\n        this.notifyStepClicked(actionType);\r\n    }\r\n\r\n    private notifyStepClicked(actionType: StepActionType) {\r\n        let stepInfo: JoyrideStepInfo = {\r\n            number: this.stepsContainerService.getStepNumber(this.currentStep.name),\r\n            name: this.currentStep.name,\r\n            route: this.currentStep.route,\r\n            actionType\r\n        };\r\n        this.stepsObserver.next(stepInfo);\r\n    }\r\n\r\n    private notifyTourIsFinished() {\r\n        if (this.currentStep) this.currentStep.tourDone.emit();\r\n        this.stepsObserver.complete();\r\n    }\r\n    private removeCurrentStep() {\r\n        if (this.currentStep) this.stepDrawerService.remove(this.currentStep);\r\n    }\r\n\r\n    private scrollIfStepAndTargetAreNotVisible() {\r\n        this.scrollWhenTargetOrStepAreHiddenBottom();\r\n        this.scrollWhenTargetOrStepAreHiddenTop();\r\n    }\r\n\r\n    private scrollWhenTargetOrStepAreHiddenBottom() {\r\n        let totalTargetBottom = this.getMaxTargetAndStepBottomPosition();\r\n        if (totalTargetBottom > this.winBottomPosition) {\r\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\r\n        }\r\n    }\r\n\r\n    private scrollWhenTargetOrStepAreHiddenTop() {\r\n        let totalTargetTop = this.getMaxTargetAndStepTopPosition();\r\n        if (totalTargetTop < this.winTopPosition) {\r\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\r\n        }\r\n    }\r\n\r\n    private getMaxTargetAndStepBottomPosition(): number {\r\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\r\n        if (this.currentStep.position === 'top') {\r\n            return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\r\n        } else if (this.currentStep.position === 'bottom') {\r\n            return (\r\n                targetAbsoluteTop +\r\n                this.currentStep.stepInstance.targetHeight +\r\n                this.currentStep.stepInstance.stepHeight +\r\n                ARROW_SIZE +\r\n                DISTANCE_FROM_TARGET\r\n            );\r\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\r\n            return Math.max(\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight,\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2\r\n            );\r\n        }\r\n    }\r\n\r\n    private getMaxTargetAndStepTopPosition() {\r\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\r\n        if (this.currentStep.position === 'top') {\r\n            return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\r\n        } else if (this.currentStep.position === 'bottom') {\r\n            return targetAbsoluteTop;\r\n        } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\r\n            return Math.min(\r\n                targetAbsoluteTop,\r\n                targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2\r\n            );\r\n        }\r\n    }\r\n\r\n    private scrollIfElementBeyondOtherElements() {\r\n        if (this.isElementBeyondOthers() === 2) {\r\n            this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element);\r\n        }\r\n        if (this.isElementBeyondOthers() === 2) {\r\n            this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element);\r\n        }\r\n        if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\r\n            this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed);\r\n        }\r\n        if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\r\n            this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView();\r\n        }\r\n    }\r\n\r\n    private isElementBeyondOthers() {\r\n        return this.documentService.isElementBeyondOthers(\r\n            this.currentStep.targetViewContainer.element,\r\n            this.currentStep.isElementOrAncestorFixed,\r\n            'backdrop'\r\n        );\r\n    }\r\n}\r\n","import { StepActionType } from \"../services/joyride-steps-container.service\";\r\n\r\nexport class JoyrideStepInfo {\r\n    number: number;\r\n    name: string;\r\n    route: string;\r\n    actionType: StepActionType;\r\n}","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { JoyrideStepService } from './joyride-step.service';\r\nimport { JoyrideOptionsService } from './joyride-options.service';\r\nimport { JoyrideOptions } from '../models/joyride-options.class';\r\nimport { Observable, of } from 'rxjs';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { JoyrideStepInfo } from '../models/joyride-step-info.class';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\n@Injectable()\r\nexport class JoyrideService {\r\n    private tourInProgress: boolean = false;\r\n    private tour$: Observable<JoyrideStepInfo>;\r\n\r\n    constructor(\r\n        @Inject(PLATFORM_ID) private platformId: Object,\r\n        private readonly stepService: JoyrideStepService,\r\n        private readonly optionsService: JoyrideOptionsService\r\n    ) {}\r\n\r\n    startTour(options?: JoyrideOptions): Observable<JoyrideStepInfo> {\r\n        if (!isPlatformBrowser(this.platformId)) {\r\n            return of(new JoyrideStepInfo());\r\n        }\r\n        if (!this.tourInProgress) {\r\n            this.tourInProgress = true;\r\n            if (options) {\r\n                this.optionsService.setOptions(options);\r\n            }\r\n            this.tour$ = this.stepService.startTour().pipe(finalize(() => (this.tourInProgress = false)));\r\n            this.tour$.subscribe();\r\n        }\r\n        return this.tour$;\r\n    }\r\n\r\n    closeTour(): void {\r\n        if (this.isTourInProgress()) this.stepService.close();\r\n    }\r\n\r\n    isTourInProgress(): boolean {\r\n        return this.tourInProgress;\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { JoyrideDirective } from './directives/joyride.directive';\r\nimport { JoyrideService } from './services/joyride.service';\r\nimport { JoyrideStepComponent } from \"./components/step/joyride-step.component\";\r\nimport { JoyrideButtonComponent } from \"./components/button/button.component\";\r\nimport { JoyrideCloseButtonComponent } from \"./components/close-button/close-button.component\";\r\nimport { JoyrideStepService } from \"./services/joyride-step.service\";\r\nimport { JoyrideBackdropService } from \"./services/joyride-backdrop.service\";\r\nimport { JoyrideArrowComponent } from \"./components/arrow/arrow.component\";\r\nimport { EventListenerService } from \"./services/event-listener.service\";\r\nimport { JoyrideStepsContainerService } from \"./services/joyride-steps-container.service\";\r\nimport { DocumentService } from \"./services/document.service\";\r\nimport { JoyrideOptionsService } from './services/joyride-options.service';\r\nimport { StepDrawerService } from './services/step-drawer.service';\r\nimport { DomRefService } from './services/dom.service';\r\nimport { LoggerService } from './services/logger.service';\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { TemplatesService } from \"./services/templates.service\";\r\n\r\nexport const routerModuleForChild: ModuleWithProviders = RouterModule.forChild([]);\r\n\r\n@NgModule({\r\n    imports: [CommonModule, routerModuleForChild],\r\n    declarations: [\r\n        JoyrideDirective,\r\n        JoyrideStepComponent,\r\n        JoyrideArrowComponent,\r\n        JoyrideButtonComponent,\r\n        JoyrideCloseButtonComponent\r\n    ],\r\n    entryComponents: [JoyrideStepComponent],\r\n    exports: [\r\n        JoyrideDirective\r\n    ]\r\n})\r\nexport class JoyrideModule {\r\n    static forRoot(): ModuleWithProviders {\r\n        return {\r\n            ngModule: JoyrideModule,\r\n            providers: [\r\n                JoyrideService,\r\n                JoyrideStepService,\r\n                JoyrideStepsContainerService,\r\n                JoyrideBackdropService,\r\n                EventListenerService,\r\n                DocumentService,\r\n                JoyrideOptionsService,\r\n                StepDrawerService,\r\n                DomRefService,\r\n                LoggerService,\r\n                TemplatesService\r\n            ]\r\n        }\r\n    }\r\n    static forChild(): ModuleWithProviders {\r\n        return {\r\n            ngModule: JoyrideModule,\r\n            providers: []\r\n        }\r\n    }\r\n}\r\n"]}