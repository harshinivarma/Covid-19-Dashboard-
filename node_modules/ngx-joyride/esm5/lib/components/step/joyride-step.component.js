/**
 * @fileoverview added by tsickle
 * Generated from: lib/components/step/joyride-step.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewEncapsulation, ElementRef, ViewChild, Renderer2, Injector } from '@angular/core';
import { JoyrideStep } from '../../models/joyride-step.class';
import { JoyrideStepService, ARROW_SIZE, DISTANCE_FROM_TARGET } from '../../services';
import { JoyrideStepsContainerService } from '../../services/joyride-steps-container.service';
import { EventListenerService } from '../../services/event-listener.service';
import { DocumentService } from '../../services/document.service';
import { JoyrideOptionsService } from '../../services/joyride-options.service';
import { LoggerService } from '../../services/logger.service';
import { TemplatesService } from '../../services/templates.service';
/** @type {?} */
var STEP_MIN_WIDTH = 200;
/** @type {?} */
var STEP_MAX_WIDTH = 400;
/** @type {?} */
var CUSTOM_STEP_MAX_WIDTH_VW = 90;
/** @type {?} */
var STEP_HEIGHT = 200;
/** @type {?} */
var ASPECT_RATIO = 1.212;
/** @type {?} */
export var DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;
/** @type {?} */
export var DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;
/** @type {?} */
var DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;
/** @type {?} */
var DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;
var JoyrideStepComponent = /** @class */ (function () {
    function JoyrideStepComponent(injector, stepsContainerService, eventListenerService, documentService, renderer, logger, optionsService, templateService) {
        this.injector = injector;
        this.stepsContainerService = stepsContainerService;
        this.eventListenerService = eventListenerService;
        this.documentService = documentService;
        this.renderer = renderer;
        this.logger = logger;
        this.optionsService = optionsService;
        this.templateService = templateService;
        this.stepWidth = STEP_MIN_WIDTH;
        this.stepHeight = STEP_HEIGHT;
        this.showArrow = true;
        this.arrowSize = ARROW_SIZE;
        this.subscriptions = [];
    }
    /**
     * @return {?}
     */
    JoyrideStepComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // Need to Inject here otherwise you will obtain a circular dependency
        this.joyrideStepService = this.injector.get(JoyrideStepService);
        this.documentHeight = this.documentService.getDocumentHeight();
        this.subscriptions.push(this.subscribeToResizeEvents());
        this.title = this.step.title.asObservable();
        this.text = this.step.text.asObservable();
        this.setCustomTemplates();
        this.setCustomTexts();
        this.counter = this.getCounter();
        this.isCounterVisible = this.optionsService.isCounterVisible();
        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();
        this.themeColor = this.optionsService.getThemeColor();
        if (this.text)
            this.text.subscribe((/**
             * @param {?} val
             * @return {?}
             */
            function (val) { return _this.checkRedraw(val); }));
        if (this.title)
            this.title.subscribe((/**
             * @param {?} val
             * @return {?}
             */
            function (val) { return _this.checkRedraw(val); }));
    };
    /**
     * @return {?}
     */
    JoyrideStepComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (this.isCustomized()) {
            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');
            this.updateStepDimensions();
        }
        else {
            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');
            /** @type {?} */
            var dimensions = this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth, this.stepContainer.nativeElement.clientHeight, ASPECT_RATIO);
            dimensions = this.adjustDimensions(dimensions.width, dimensions.height);
            this.stepWidth = dimensions.width;
            this.stepHeight = dimensions.height;
            this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');
            this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');
        }
        this.drawStep();
    };
    /**
     * @private
     * @param {?} val
     * @return {?}
     */
    JoyrideStepComponent.prototype.checkRedraw = /**
     * @private
     * @param {?} val
     * @return {?}
     */
    function (val) {
        var _this = this;
        if (val != null) {
            // Need to wait that the change is rendered before redrawing
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.redrawStep();
            }), 2);
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.isCustomized = /**
     * @private
     * @return {?}
     */
    function () {
        return (this.step.stepContent ||
            this.templateService.getCounter() ||
            this.templateService.getPrevButton() ||
            this.templateService.getNextButton() ||
            this.templateService.getDoneButton());
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.setCustomTexts = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var customeTexts = this.optionsService.getCustomTexts();
        this.prevText = customeTexts.prev;
        this.nextText = customeTexts.next;
        this.doneText = customeTexts.done;
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.drawStep = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var position = this.step.isElementOrAncestorFixed
            ? 'fixed'
            : 'absolute';
        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);
        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);
        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;
        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;
        this.targetAbsoluteLeft =
            position === 'fixed'
                ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element)
                : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);
        this.targetAbsoluteTop =
            position === 'fixed'
                ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element)
                : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);
        this.setStepStyle();
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.getCounter = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var stepPosition = this.stepsContainerService.getStepNumber(this.step.name);
        /** @type {?} */
        var numberOfSteps = this.stepsContainerService.getStepsCount();
        this.counterData = { step: stepPosition, total: numberOfSteps };
        return stepPosition + '/' + numberOfSteps;
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.setCustomTemplates = /**
     * @private
     * @return {?}
     */
    function () {
        this.customContent = this.step.stepContent;
        this.ctx = this.step.stepContentParams;
        this.customPrevButton = this.templateService.getPrevButton();
        this.customNextButton = this.templateService.getNextButton();
        this.customDoneButton = this.templateService.getDoneButton();
        this.customCounter = this.templateService.getCounter();
    };
    /**
     * @return {?}
     */
    JoyrideStepComponent.prototype.prev = /**
     * @return {?}
     */
    function () {
        this.joyrideStepService.prev();
    };
    /**
     * @return {?}
     */
    JoyrideStepComponent.prototype.next = /**
     * @return {?}
     */
    function () {
        this.joyrideStepService.next();
    };
    /**
     * @return {?}
     */
    JoyrideStepComponent.prototype.close = /**
     * @return {?}
     */
    function () {
        this.joyrideStepService.close();
    };
    /**
     * @return {?}
     */
    JoyrideStepComponent.prototype.isFirstStep = /**
     * @return {?}
     */
    function () {
        return this.stepsContainerService.getStepNumber(this.step.name) === 1;
    };
    /**
     * @return {?}
     */
    JoyrideStepComponent.prototype.isLastStep = /**
     * @return {?}
     */
    function () {
        return (this.stepsContainerService.getStepNumber(this.step.name) ===
            this.stepsContainerService.getStepsCount());
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.setStepStyle = /**
     * @private
     * @return {?}
     */
    function () {
        switch (this.step.position) {
            case 'top': {
                this.setStyleTop();
                break;
            }
            case 'bottom': {
                this.setStyleBottom();
                break;
            }
            case 'right': {
                this.setStyleRight();
                break;
            }
            case 'left': {
                this.setStyleLeft();
                break;
            }
            case 'center': {
                this.setStyleCenter();
                break;
            }
            default: {
                this.setStyleBottom();
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.setStyleTop = /**
     * @private
     * @return {?}
     */
    function () {
        this.stepsContainerService.updatePosition(this.step.name, 'top');
        this.topPosition =
            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;
        this.stepAbsoluteTop =
            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;
        this.arrowTopPosition = this.stepHeight;
        this.leftPosition =
            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;
        this.stepAbsoluteLeft =
            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;
        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;
        this.adjustLeftPosition();
        this.adjustRightPosition();
        this.arrowPosition = 'bottom';
        this.autofixTopPosition();
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.setStyleRight = /**
     * @private
     * @return {?}
     */
    function () {
        this.stepsContainerService.updatePosition(this.step.name, 'right');
        this.topPosition =
            this.targetAbsoluteTop +
                this.targetHeight / 2 -
                this.stepHeight / 2;
        this.stepAbsoluteTop =
            this.targetAbsoluteTop +
                this.targetHeight / 2 -
                this.stepHeight / 2;
        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;
        this.leftPosition =
            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;
        this.stepAbsoluteLeft =
            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;
        this.arrowLeftPosition = -this.arrowSize;
        this.adjustTopPosition();
        this.adjustBottomPosition();
        this.arrowPosition = 'left';
        this.autofixRightPosition();
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.setStyleBottom = /**
     * @private
     * @return {?}
     */
    function () {
        this.stepsContainerService.updatePosition(this.step.name, 'bottom');
        this.topPosition =
            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;
        this.stepAbsoluteTop =
            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;
        this.arrowTopPosition = -this.arrowSize;
        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;
        this.leftPosition =
            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;
        this.stepAbsoluteLeft =
            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;
        this.adjustLeftPosition();
        this.adjustRightPosition();
        this.arrowPosition = 'top';
        this.autofixBottomPosition();
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.setStyleLeft = /**
     * @private
     * @return {?}
     */
    function () {
        this.stepsContainerService.updatePosition(this.step.name, 'left');
        this.topPosition =
            this.targetAbsoluteTop +
                this.targetHeight / 2 -
                this.stepHeight / 2;
        this.stepAbsoluteTop =
            this.targetAbsoluteTop +
                this.targetHeight / 2 -
                this.stepHeight / 2;
        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;
        this.leftPosition =
            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;
        this.stepAbsoluteLeft =
            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;
        this.arrowLeftPosition = this.stepWidth;
        this.adjustTopPosition();
        this.adjustBottomPosition();
        this.arrowPosition = 'right';
        this.autofixLeftPosition();
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.setStyleCenter = /**
     * @private
     * @return {?}
     */
    function () {
        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');
        this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');
        this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');
        this.updateStepDimensions();
        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', "translate(-" + this.stepWidth / 2 + "px, -" + this.stepHeight / 2 + "px)");
        this.showArrow = false;
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.adjustLeftPosition = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.leftPosition < 0) {
            this.arrowLeftPosition =
                this.arrowLeftPosition +
                    this.leftPosition -
                    DEFAULT_DISTANCE_FROM_MARGIN_LEFT;
            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.adjustRightPosition = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var currentWindowWidth = document.body.clientWidth;
        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {
            /** @type {?} */
            var newLeftPos = this.leftPosition -
                (this.stepAbsoluteLeft +
                    this.stepWidth +
                    DEFAULT_DISTANCE_FROM_MARGIN_RIGHT -
                    currentWindowWidth);
            /** @type {?} */
            var deltaLeftPosition = newLeftPos - this.leftPosition;
            this.leftPosition = newLeftPos;
            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.adjustTopPosition = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.stepAbsoluteTop < 0) {
            this.arrowTopPosition =
                this.arrowTopPosition +
                    this.topPosition -
                    DEFAULT_DISTANCE_FROM_MARGIN_TOP;
            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.adjustBottomPosition = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {
            /** @type {?} */
            var newTopPos = this.topPosition -
                (this.stepAbsoluteTop +
                    this.stepHeight +
                    DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM -
                    this.documentHeight);
            /** @type {?} */
            var deltaTopPosition = newTopPos - this.topPosition;
            this.topPosition = newTopPos;
            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.autofixTopPosition = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.positionAlreadyFixed) {
            this.logger.warn('No step positions found for this step. The step will be centered.');
        }
        else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize <
            0) {
            this.positionAlreadyFixed = true;
            this.setStyleRight();
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.autofixRightPosition = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.targetAbsoluteLeft +
            this.targetWidth +
            this.stepWidth +
            this.arrowSize >
            document.body.clientWidth) {
            this.setStyleBottom();
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.autofixBottomPosition = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.targetAbsoluteTop +
            this.stepHeight +
            this.arrowSize +
            this.targetHeight >
            this.documentHeight) {
            this.setStyleLeft();
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.autofixLeftPosition = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {
            this.setStyleTop();
        }
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.subscribeToResizeEvents = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        return this.eventListenerService.resizeEvent.subscribe((/**
         * @return {?}
         */
        function () {
            _this.redrawStep();
        }));
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.redrawStep = /**
     * @private
     * @return {?}
     */
    function () {
        this.updateStepDimensions();
        this.drawStep();
    };
    /**
     * @private
     * @param {?} width
     * @param {?} height
     * @param {?} aspectRatio
     * @return {?}
     */
    JoyrideStepComponent.prototype.getDimensionsByAspectRatio = /**
     * @private
     * @param {?} width
     * @param {?} height
     * @param {?} aspectRatio
     * @return {?}
     */
    function (width, height, aspectRatio) {
        /** @type {?} */
        var calcHeight = (width + height) / (1 + aspectRatio);
        /** @type {?} */
        var calcWidth = calcHeight * aspectRatio;
        return {
            width: calcWidth,
            height: calcHeight
        };
    };
    /**
     * @private
     * @param {?} width
     * @param {?} height
     * @return {?}
     */
    JoyrideStepComponent.prototype.adjustDimensions = /**
     * @private
     * @param {?} width
     * @param {?} height
     * @return {?}
     */
    function (width, height) {
        /** @type {?} */
        var area = width * height;
        /** @type {?} */
        var newWidth = width;
        /** @type {?} */
        var newHeight = height;
        if (width > STEP_MAX_WIDTH) {
            newWidth = STEP_MAX_WIDTH;
            newHeight = area / newWidth;
        }
        else if (width < STEP_MIN_WIDTH) {
            newWidth = STEP_MIN_WIDTH;
            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;
        }
        return {
            width: newWidth,
            height: newHeight
        };
    };
    /**
     * @private
     * @return {?}
     */
    JoyrideStepComponent.prototype.updateStepDimensions = /**
     * @private
     * @return {?}
     */
    function () {
        this.stepWidth = this.stepContainer.nativeElement.clientWidth;
        this.stepHeight = this.stepContainer.nativeElement.clientHeight;
    };
    /**
     * @return {?}
     */
    JoyrideStepComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.subscriptions.forEach((/**
         * @param {?} subscription
         * @return {?}
         */
        function (subscription) {
            subscription.unsubscribe();
        }));
    };
    JoyrideStepComponent.decorators = [
        { type: Component, args: [{
                    selector: 'joyride-step',
                    template: "<div #stepHolder class=\"joyride-step__holder\" [id]=\"'joyride-step-' + step.name\" [style.top.px]=\"topPosition\" [style.left.px]=\"leftPosition\">\r\n    <joyride-arrow *ngIf=\"showArrow\" class=\"joyride-step__arrow\" [position]=\"arrowPosition\" [style.top.px]=\"arrowTopPosition\"\r\n        [style.left.px]=\"arrowLeftPosition\"></joyride-arrow>\r\n    <div #stepContainer class=\"joyride-step__container\">\r\n        <joy-close-button class=\"joyride-step__close\" (click)=\"close()\"></joy-close-button>\r\n        <div class=\"joyride-step__header\">\r\n            <div class=\"joyride-step__title\" [style.color]=\"themeColor\">{{ title | async }}</div>\r\n        </div>\r\n        <div class=\"joyride-step__body\">\r\n            <ng-container *ngTemplateOutlet=\"customContent ? customContent : defaultContent; context: ctx\"></ng-container>\r\n            <ng-template #defaultContent>\r\n                {{ text | async }}\r\n            </ng-template>\r\n        </div>\r\n        <div class=\"joyride-step__footer\">\r\n            <div *ngIf=\"isCounterVisible\" class=\"joyride-step__counter-container\">\r\n                <ng-container *ngTemplateOutlet=\"customCounter ? customCounter : defaultCounter; context: counterData\"></ng-container>\r\n                <ng-template #defaultCounter>\r\n                    <div class=\"joyride-step__counter\">{{ counter }}</div>\r\n                </ng-template>\r\n            </div>\r\n            <div class=\"joyride-step__buttons-container\">\r\n                <div class=\"joyride-step__prev-container joyride-step__button\" *ngIf=\"isPrevButtonVisible && !isFirstStep()\" (click)=\"prev()\">\r\n                    <ng-container *ngTemplateOutlet=\"customPrevButton ? customPrevButton : defaultPrevButton\"></ng-container>\r\n                    <ng-template #defaultPrevButton>\r\n                        <joyride-button class=\"joyride-step__prev-button\" [color]=\"themeColor\">{{ prevText | async }}</joyride-button>\r\n                    </ng-template>\r\n                </div>\r\n                <div class=\"joyride-step__next-container joyride-step__button\" *ngIf=\"!isLastStep(); else doneButton\" (click)=\"next()\">\r\n                    <ng-container *ngTemplateOutlet=\"customNextButton ? customNextButton : defaulNextButton\"></ng-container>\r\n                    <ng-template #defaulNextButton>\r\n                        <joyride-button [color]=\"themeColor\">{{ nextText | async }}</joyride-button>\r\n                    </ng-template>\r\n                </div>\r\n                <ng-template #doneButton>\r\n                    <div class=\"joyride-step__done-container joyride-step__button\" (click)=\"close()\">\r\n                        <ng-container *ngTemplateOutlet=\"customDoneButton ? customDoneButton : defaultDoneButton\"></ng-container>\r\n                        <ng-template #defaultDoneButton>\r\n                            <joyride-button class=\"joyride-step__done-button\" [color]=\"themeColor\">{{ doneText | async }}</joyride-button>\r\n                        </ng-template>\r\n                    </div>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    styles: [".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}"]
                }] }
    ];
    /** @nocollapse */
    JoyrideStepComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: JoyrideStepsContainerService },
        { type: EventListenerService },
        { type: DocumentService },
        { type: Renderer2 },
        { type: LoggerService },
        { type: JoyrideOptionsService },
        { type: TemplatesService }
    ]; };
    JoyrideStepComponent.propDecorators = {
        step: [{ type: Input }],
        stepHolder: [{ type: ViewChild, args: ['stepHolder', { static: true },] }],
        stepContainer: [{ type: ViewChild, args: ['stepContainer', { static: true },] }]
    };
    return JoyrideStepComponent;
}());
export { JoyrideStepComponent };
if (false) {
    /** @type {?} */
    JoyrideStepComponent.prototype.stepWidth;
    /** @type {?} */
    JoyrideStepComponent.prototype.stepHeight;
    /** @type {?} */
    JoyrideStepComponent.prototype.leftPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.topPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.showArrow;
    /** @type {?} */
    JoyrideStepComponent.prototype.arrowPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.arrowLeftPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.arrowTopPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.title;
    /** @type {?} */
    JoyrideStepComponent.prototype.text;
    /** @type {?} */
    JoyrideStepComponent.prototype.counter;
    /** @type {?} */
    JoyrideStepComponent.prototype.isCounterVisible;
    /** @type {?} */
    JoyrideStepComponent.prototype.isPrevButtonVisible;
    /** @type {?} */
    JoyrideStepComponent.prototype.themeColor;
    /** @type {?} */
    JoyrideStepComponent.prototype.customContent;
    /** @type {?} */
    JoyrideStepComponent.prototype.customPrevButton;
    /** @type {?} */
    JoyrideStepComponent.prototype.customNextButton;
    /** @type {?} */
    JoyrideStepComponent.prototype.customDoneButton;
    /** @type {?} */
    JoyrideStepComponent.prototype.customCounter;
    /** @type {?} */
    JoyrideStepComponent.prototype.counterData;
    /** @type {?} */
    JoyrideStepComponent.prototype.ctx;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.arrowSize;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.stepAbsoluteLeft;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.stepAbsoluteTop;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.targetWidth;
    /** @type {?} */
    JoyrideStepComponent.prototype.targetHeight;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.targetAbsoluteLeft;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.targetAbsoluteTop;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.subscriptions;
    /** @type {?} */
    JoyrideStepComponent.prototype.joyrideStepService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.positionAlreadyFixed;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.documentHeight;
    /** @type {?} */
    JoyrideStepComponent.prototype.prevText;
    /** @type {?} */
    JoyrideStepComponent.prototype.nextText;
    /** @type {?} */
    JoyrideStepComponent.prototype.doneText;
    /** @type {?} */
    JoyrideStepComponent.prototype.step;
    /** @type {?} */
    JoyrideStepComponent.prototype.stepHolder;
    /** @type {?} */
    JoyrideStepComponent.prototype.stepContainer;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.stepsContainerService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.eventListenerService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.documentService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.logger;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.optionsService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.templateService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam95cmlkZS1zdGVwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1qb3lyaWRlLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvc3RlcC9qb3lyaWRlLXN0ZXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNILFNBQVMsRUFDVCxLQUFLLEVBRUwsaUJBQWlCLEVBR2pCLFVBQVUsRUFDVixTQUFTLEVBQ1QsU0FBUyxFQUNULFFBQVEsRUFFWCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDOUQsT0FBTyxFQUNILGtCQUFrQixFQUNsQixVQUFVLEVBQ1Ysb0JBQW9CLEVBRXZCLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDOUYsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFFN0UsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQy9FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQzs7SUFFOUQsY0FBYyxHQUFHLEdBQUc7O0lBQ3BCLGNBQWMsR0FBRyxHQUFHOztJQUNwQix3QkFBd0IsR0FBRyxFQUFFOztJQUM3QixXQUFXLEdBQUcsR0FBRzs7SUFDakIsWUFBWSxHQUFHLEtBQUs7O0FBQzFCLE1BQU0sS0FBTyxnQ0FBZ0MsR0FBRyxDQUFDOztBQUNqRCxNQUFNLEtBQU8saUNBQWlDLEdBQUcsQ0FBQzs7SUFDNUMsbUNBQW1DLEdBQUcsQ0FBQzs7SUFDdkMsa0NBQWtDLEdBQUcsQ0FBQztBQUU1QztJQW1ESSw4QkFDWSxRQUFr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RDs7Ozs7SUFDdEQsK0NBQWtEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCxcclxuICAgIElucHV0LFxyXG4gICAgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIFZpZXdFbmNhcHN1bGF0aW9uLFxyXG4gICAgT25Jbml0LFxyXG4gICAgT25EZXN0cm95LFxyXG4gICAgRWxlbWVudFJlZixcclxuICAgIFZpZXdDaGlsZCxcclxuICAgIFJlbmRlcmVyMixcclxuICAgIEluamVjdG9yLFxyXG4gICAgVGVtcGxhdGVSZWZcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSm95cmlkZVN0ZXAgfSBmcm9tICcuLi8uLi9tb2RlbHMvam95cmlkZS1zdGVwLmNsYXNzJztcclxuaW1wb3J0IHtcclxuICAgIEpveXJpZGVTdGVwU2VydmljZSxcclxuICAgIEFSUk9XX1NJWkUsXHJcbiAgICBESVNUQU5DRV9GUk9NX1RBUkdFVCxcclxuICAgIElKb3lyaWRlU3RlcFNlcnZpY2VcclxufSBmcm9tICcuLi8uLi9zZXJ2aWNlcyc7XHJcbmltcG9ydCB7IEpveXJpZGVTdGVwc0NvbnRhaW5lclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9qb3lyaWRlLXN0ZXBzLWNvbnRhaW5lci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRXZlbnRMaXN0ZW5lclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9ldmVudC1saXN0ZW5lci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IERvY3VtZW50U2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2RvY3VtZW50LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBKb3lyaWRlT3B0aW9uc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9qb3lyaWRlLW9wdGlvbnMuc2VydmljZSc7XHJcbmltcG9ydCB7IExvZ2dlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9sb2dnZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IFRlbXBsYXRlc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy90ZW1wbGF0ZXMuc2VydmljZSc7XHJcblxyXG5jb25zdCBTVEVQX01JTl9XSURUSCA9IDIwMDtcclxuY29uc3QgU1RFUF9NQVhfV0lEVEggPSA0MDA7XHJcbmNvbnN0IENVU1RPTV9TVEVQX01BWF9XSURUSF9WVyA9IDkwO1xyXG5jb25zdCBTVEVQX0hFSUdIVCA9IDIwMDtcclxuY29uc3QgQVNQRUNUX1JBVElPID0gMS4yMTI7XHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX1RPUCA9IDI7XHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX0xFRlQgPSAyO1xyXG5jb25zdCBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX0JPVFRPTSA9IDU7XHJcbmNvbnN0IERFRkFVTFRfRElTVEFOQ0VfRlJPTV9NQVJHSU5fUklHSFQgPSA1O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2pveXJpZGUtc3RlcCcsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vam95cmlkZS1zdGVwLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2pveXJpZGUtc3RlcC5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgSm95cmlkZVN0ZXBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgICBzdGVwV2lkdGg6IG51bWJlciA9IFNURVBfTUlOX1dJRFRIO1xyXG4gICAgc3RlcEhlaWdodDogbnVtYmVyID0gU1RFUF9IRUlHSFQ7XHJcbiAgICBsZWZ0UG9zaXRpb246IG51bWJlcjtcclxuICAgIHRvcFBvc2l0aW9uOiBudW1iZXI7XHJcbiAgICBzaG93QXJyb3cgPSB0cnVlO1xyXG4gICAgYXJyb3dQb3NpdGlvbjogc3RyaW5nO1xyXG4gICAgYXJyb3dMZWZ0UG9zaXRpb246IG51bWJlcjtcclxuICAgIGFycm93VG9wUG9zaXRpb246IG51bWJlcjtcclxuICAgIHRpdGxlOiBPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICB0ZXh0OiBPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICBjb3VudGVyOiBzdHJpbmc7XHJcbiAgICBpc0NvdW50ZXJWaXNpYmxlOiBib29sZWFuO1xyXG4gICAgaXNQcmV2QnV0dG9uVmlzaWJsZTogYm9vbGVhbjtcclxuICAgIHRoZW1lQ29sb3I6IHN0cmluZztcclxuICAgIGN1c3RvbUNvbnRlbnQ6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICBjdXN0b21QcmV2QnV0dG9uOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgY3VzdG9tTmV4dEJ1dHRvbjogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIGN1c3RvbURvbmVCdXR0b246IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICBjdXN0b21Db3VudGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgY291bnRlckRhdGE6IGFueTtcclxuICAgIGN0eDogT2JqZWN0O1xyXG5cclxuICAgIHByaXZhdGUgYXJyb3dTaXplOiBudW1iZXIgPSBBUlJPV19TSVpFO1xyXG4gICAgcHJpdmF0ZSBzdGVwQWJzb2x1dGVMZWZ0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHN0ZXBBYnNvbHV0ZVRvcDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0YXJnZXRXaWR0aDogbnVtYmVyO1xyXG4gICAgdGFyZ2V0SGVpZ2h0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRhcmdldEFic29sdXRlTGVmdDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0YXJnZXRBYnNvbHV0ZVRvcDogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuICAgIGpveXJpZGVTdGVwU2VydmljZTogSUpveXJpZGVTdGVwU2VydmljZTtcclxuXHJcbiAgICBwcml2YXRlIHBvc2l0aW9uQWxyZWFkeUZpeGVkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBkb2N1bWVudEhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgIHByZXZUZXh0OiBPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICBuZXh0VGV4dDogT2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgZG9uZVRleHQ6IE9ic2VydmFibGU8c3RyaW5nPjtcclxuXHJcbiAgICBASW5wdXQoKSBzdGVwPzogSm95cmlkZVN0ZXA7XHJcbiAgICBAVmlld0NoaWxkKCdzdGVwSG9sZGVyJywgeyBzdGF0aWM6IHRydWUgfSkgc3RlcEhvbGRlcjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3N0ZXBDb250YWluZXInLCB7IHN0YXRpYzogdHJ1ZSB9KSBzdGVwQ29udGFpbmVyOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc3RlcHNDb250YWluZXJTZXJ2aWNlOiBKb3lyaWRlU3RlcHNDb250YWluZXJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgZXZlbnRMaXN0ZW5lclNlcnZpY2U6IEV2ZW50TGlzdGVuZXJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgZG9jdW1lbnRTZXJ2aWNlOiBEb2N1bWVudFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgb3B0aW9uc1NlcnZpY2U6IEpveXJpZGVPcHRpb25zU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHRlbXBsYXRlU2VydmljZTogVGVtcGxhdGVzU2VydmljZVxyXG4gICAgKSB7fVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIC8vIE5lZWQgdG8gSW5qZWN0IGhlcmUgb3RoZXJ3aXNlIHlvdSB3aWxsIG9idGFpbiBhIGNpcmN1bGFyIGRlcGVuZGVuY3lcclxuICAgICAgICB0aGlzLmpveXJpZGVTdGVwU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KEpveXJpZGVTdGVwU2VydmljZSk7XHJcblxyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRIZWlnaHQgPSB0aGlzLmRvY3VtZW50U2VydmljZS5nZXREb2N1bWVudEhlaWdodCgpO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHRoaXMuc3Vic2NyaWJlVG9SZXNpemVFdmVudHMoKSk7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuc3RlcC50aXRsZS5hc09ic2VydmFibGUoKTtcclxuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnN0ZXAudGV4dC5hc09ic2VydmFibGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRDdXN0b21UZW1wbGF0ZXMoKTtcclxuICAgICAgICB0aGlzLnNldEN1c3RvbVRleHRzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY291bnRlciA9IHRoaXMuZ2V0Q291bnRlcigpO1xyXG4gICAgICAgIHRoaXMuaXNDb3VudGVyVmlzaWJsZSA9IHRoaXMub3B0aW9uc1NlcnZpY2UuaXNDb3VudGVyVmlzaWJsZSgpO1xyXG4gICAgICAgIHRoaXMuaXNQcmV2QnV0dG9uVmlzaWJsZSA9IHRoaXMub3B0aW9uc1NlcnZpY2UuaXNQcmV2QnV0dG9uVmlzaWJsZSgpO1xyXG4gICAgICAgIHRoaXMudGhlbWVDb2xvciA9IHRoaXMub3B0aW9uc1NlcnZpY2UuZ2V0VGhlbWVDb2xvcigpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50ZXh0KSB0aGlzLnRleHQuc3Vic2NyaWJlKHZhbCA9PiB0aGlzLmNoZWNrUmVkcmF3KHZhbCkpO1xyXG4gICAgICAgIGlmICh0aGlzLnRpdGxlKSB0aGlzLnRpdGxlLnN1YnNjcmliZSh2YWwgPT4gdGhpcy5jaGVja1JlZHJhdyh2YWwpKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDdXN0b21pemVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RlcENvbnRhaW5lci5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgJ21heC13aWR0aCcsXHJcbiAgICAgICAgICAgICAgICBDVVNUT01fU1RFUF9NQVhfV0lEVEhfVlcgKyAndncnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RlcERpbWVuc2lvbnMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAnbWF4LXdpZHRoJyxcclxuICAgICAgICAgICAgICAgIFNURVBfTUFYX1dJRFRIICsgJ3B4J1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsZXQgZGltZW5zaW9ucyA9IHRoaXMuZ2V0RGltZW5zaW9uc0J5QXNwZWN0UmF0aW8oXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBDb250YWluZXIubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aCxcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RlcENvbnRhaW5lci5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodCxcclxuICAgICAgICAgICAgICAgIEFTUEVDVF9SQVRJT1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBkaW1lbnNpb25zID0gdGhpcy5hZGp1c3REaW1lbnNpb25zKFxyXG4gICAgICAgICAgICAgICAgZGltZW5zaW9ucy53aWR0aCxcclxuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMuaGVpZ2h0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RlcFdpZHRoID0gZGltZW5zaW9ucy53aWR0aDtcclxuICAgICAgICAgICAgdGhpcy5zdGVwSGVpZ2h0ID0gZGltZW5zaW9ucy5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBDb250YWluZXIubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgICAgICd3aWR0aCcsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBXaWR0aCArICdweCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RlcENvbnRhaW5lci5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCcsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBIZWlnaHQgKyAncHgnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZHJhd1N0ZXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrUmVkcmF3KHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBOZWVkIHRvIHdhaXQgdGhhdCB0aGUgY2hhbmdlIGlzIHJlbmRlcmVkIGJlZm9yZSByZWRyYXdpbmdcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZHJhd1N0ZXAoKTtcclxuICAgICAgICAgICAgfSwgMik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNDdXN0b21pemVkKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcC5zdGVwQ29udGVudCB8fFxyXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZS5nZXRDb3VudGVyKCkgfHxcclxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZVNlcnZpY2UuZ2V0UHJldkJ1dHRvbigpIHx8XHJcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldE5leHRCdXR0b24oKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZS5nZXREb25lQnV0dG9uKClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q3VzdG9tVGV4dHMoKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tZVRleHRzID0gdGhpcy5vcHRpb25zU2VydmljZS5nZXRDdXN0b21UZXh0cygpO1xyXG4gICAgICAgIHRoaXMucHJldlRleHQgPSBjdXN0b21lVGV4dHMucHJldjtcclxuICAgICAgICB0aGlzLm5leHRUZXh0ID0gY3VzdG9tZVRleHRzLm5leHQ7XHJcbiAgICAgICAgdGhpcy5kb25lVGV4dCA9IGN1c3RvbWVUZXh0cy5kb25lO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJhd1N0ZXAoKSB7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy5zdGVwLmlzRWxlbWVudE9yQW5jZXN0b3JGaXhlZFxyXG4gICAgICAgICAgICA/ICdmaXhlZCdcclxuICAgICAgICAgICAgOiAnYWJzb2x1dGUnO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhvbGRlci5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAncG9zaXRpb24nLFxyXG4gICAgICAgICAgICBwb3NpdGlvblxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgdGhpcy5zdGVwSG9sZGVyLm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nLFxyXG4gICAgICAgICAgICB0aGlzLnN0ZXAudHJhbnNmb3JtQ3NzU3R5bGVcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0V2lkdGggPSB0aGlzLnN0ZXAudGFyZ2V0Vmlld0NvbnRhaW5lci5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICAgICAgdGhpcy50YXJnZXRIZWlnaHQgPSB0aGlzLnN0ZXAudGFyZ2V0Vmlld0NvbnRhaW5lci5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVMZWZ0ID1cclxuICAgICAgICAgICAgcG9zaXRpb24gPT09ICdmaXhlZCdcclxuICAgICAgICAgICAgICAgID8gdGhpcy5kb2N1bWVudFNlcnZpY2UuZ2V0RWxlbWVudEZpeGVkTGVmdChcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcC50YXJnZXRWaWV3Q29udGFpbmVyLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLmRvY3VtZW50U2VydmljZS5nZXRFbGVtZW50QWJzb2x1dGVMZWZ0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwLnRhcmdldFZpZXdDb250YWluZXIuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVUb3AgPVxyXG4gICAgICAgICAgICBwb3NpdGlvbiA9PT0gJ2ZpeGVkJ1xyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmRvY3VtZW50U2VydmljZS5nZXRFbGVtZW50Rml4ZWRUb3AoXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0ZXAudGFyZ2V0Vmlld0NvbnRhaW5lci5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIDogdGhpcy5kb2N1bWVudFNlcnZpY2UuZ2V0RWxlbWVudEFic29sdXRlVG9wKFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwLnRhcmdldFZpZXdDb250YWluZXIuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuc2V0U3RlcFN0eWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDb3VudGVyKCk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHN0ZXBQb3NpdGlvbiA9IHRoaXMuc3RlcHNDb250YWluZXJTZXJ2aWNlLmdldFN0ZXBOdW1iZXIoXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcC5uYW1lXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgbnVtYmVyT2ZTdGVwcyA9IHRoaXMuc3RlcHNDb250YWluZXJTZXJ2aWNlLmdldFN0ZXBzQ291bnQoKTtcclxuICAgICAgICB0aGlzLmNvdW50ZXJEYXRhID0geyBzdGVwOiBzdGVwUG9zaXRpb24sIHRvdGFsOiBudW1iZXJPZlN0ZXBzIH07XHJcbiAgICAgICAgcmV0dXJuIHN0ZXBQb3NpdGlvbiArICcvJyArIG51bWJlck9mU3RlcHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDdXN0b21UZW1wbGF0ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Db250ZW50ID0gdGhpcy5zdGVwLnN0ZXBDb250ZW50O1xyXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5zdGVwLnN0ZXBDb250ZW50UGFyYW1zO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUHJldkJ1dHRvbiA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldFByZXZCdXR0b24oKTtcclxuICAgICAgICB0aGlzLmN1c3RvbU5leHRCdXR0b24gPSB0aGlzLnRlbXBsYXRlU2VydmljZS5nZXROZXh0QnV0dG9uKCk7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Eb25lQnV0dG9uID0gdGhpcy50ZW1wbGF0ZVNlcnZpY2UuZ2V0RG9uZUJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQ291bnRlciA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldENvdW50ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcmV2KCkge1xyXG4gICAgICAgIHRoaXMuam95cmlkZVN0ZXBTZXJ2aWNlLnByZXYoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZXh0KCkge1xyXG4gICAgICAgIHRoaXMuam95cmlkZVN0ZXBTZXJ2aWNlLm5leHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLmpveXJpZGVTdGVwU2VydmljZS5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRmlyc3RTdGVwKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS5nZXRTdGVwTnVtYmVyKHRoaXMuc3RlcC5uYW1lKSA9PT0gMTtcclxuICAgIH1cclxuXHJcbiAgICBpc0xhc3RTdGVwKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcHNDb250YWluZXJTZXJ2aWNlLmdldFN0ZXBOdW1iZXIodGhpcy5zdGVwLm5hbWUpID09PVxyXG4gICAgICAgICAgICB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS5nZXRTdGVwc0NvdW50KClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U3RlcFN0eWxlKCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGVwLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVUb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVCb3R0b20oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0Jzoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdHlsZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdsZWZ0Jzoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdHlsZUxlZnQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVDZW50ZXIoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVCb3R0b20oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFN0eWxlVG9wKCkge1xyXG4gICAgICAgIHRoaXMuc3RlcHNDb250YWluZXJTZXJ2aWNlLnVwZGF0ZVBvc2l0aW9uKHRoaXMuc3RlcC5uYW1lLCAndG9wJyk7XHJcbiAgICAgICAgdGhpcy50b3BQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVUb3AgLSBESVNUQU5DRV9GUk9NX1RBUkdFVCAtIHRoaXMuc3RlcEhlaWdodDtcclxuICAgICAgICB0aGlzLnN0ZXBBYnNvbHV0ZVRvcCA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVUb3AgLSBESVNUQU5DRV9GUk9NX1RBUkdFVCAtIHRoaXMuc3RlcEhlaWdodDtcclxuICAgICAgICB0aGlzLmFycm93VG9wUG9zaXRpb24gPSB0aGlzLnN0ZXBIZWlnaHQ7XHJcblxyXG4gICAgICAgIHRoaXMubGVmdFBvc2l0aW9uID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRXaWR0aCAvIDIgLSB0aGlzLnN0ZXBXaWR0aCAvIDIgKyB0aGlzLnRhcmdldEFic29sdXRlTGVmdDtcclxuICAgICAgICB0aGlzLnN0ZXBBYnNvbHV0ZUxlZnQgPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldFdpZHRoIC8gMiAtIHRoaXMuc3RlcFdpZHRoIC8gMiArIHRoaXMudGFyZ2V0QWJzb2x1dGVMZWZ0O1xyXG4gICAgICAgIHRoaXMuYXJyb3dMZWZ0UG9zaXRpb24gPSB0aGlzLnN0ZXBXaWR0aCAvIDIgLSB0aGlzLmFycm93U2l6ZTtcclxuICAgICAgICB0aGlzLmFkanVzdExlZnRQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYWRqdXN0UmlnaHRQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYXJyb3dQb3NpdGlvbiA9ICdib3R0b20nO1xyXG4gICAgICAgIHRoaXMuYXV0b2ZpeFRvcFBvc2l0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTdHlsZVJpZ2h0KCkge1xyXG4gICAgICAgIHRoaXMuc3RlcHNDb250YWluZXJTZXJ2aWNlLnVwZGF0ZVBvc2l0aW9uKHRoaXMuc3RlcC5uYW1lLCAncmlnaHQnKTtcclxuICAgICAgICB0aGlzLnRvcFBvc2l0aW9uID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZVRvcCArXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0SGVpZ2h0IC8gMiAtXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhlaWdodCAvIDI7XHJcbiAgICAgICAgdGhpcy5zdGVwQWJzb2x1dGVUb3AgPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlVG9wICtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRIZWlnaHQgLyAyIC1cclxuICAgICAgICAgICAgdGhpcy5zdGVwSGVpZ2h0IC8gMjtcclxuICAgICAgICB0aGlzLmFycm93VG9wUG9zaXRpb24gPSB0aGlzLnN0ZXBIZWlnaHQgLyAyIC0gdGhpcy5hcnJvd1NpemU7XHJcblxyXG4gICAgICAgIHRoaXMubGVmdFBvc2l0aW9uID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZUxlZnQgKyB0aGlzLnRhcmdldFdpZHRoICsgRElTVEFOQ0VfRlJPTV9UQVJHRVQ7XHJcbiAgICAgICAgdGhpcy5zdGVwQWJzb2x1dGVMZWZ0ID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZUxlZnQgKyB0aGlzLnRhcmdldFdpZHRoICsgRElTVEFOQ0VfRlJPTV9UQVJHRVQ7XHJcbiAgICAgICAgdGhpcy5hcnJvd0xlZnRQb3NpdGlvbiA9IC10aGlzLmFycm93U2l6ZTtcclxuICAgICAgICB0aGlzLmFkanVzdFRvcFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5hZGp1c3RCb3R0b21Qb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYXJyb3dQb3NpdGlvbiA9ICdsZWZ0JztcclxuICAgICAgICB0aGlzLmF1dG9maXhSaWdodFBvc2l0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTdHlsZUJvdHRvbSgpIHtcclxuICAgICAgICB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS51cGRhdGVQb3NpdGlvbih0aGlzLnN0ZXAubmFtZSwgJ2JvdHRvbScpO1xyXG4gICAgICAgIHRoaXMudG9wUG9zaXRpb24gPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlVG9wICsgdGhpcy50YXJnZXRIZWlnaHQgKyBESVNUQU5DRV9GUk9NX1RBUkdFVDtcclxuICAgICAgICB0aGlzLnN0ZXBBYnNvbHV0ZVRvcCA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVUb3AgKyB0aGlzLnRhcmdldEhlaWdodCArIERJU1RBTkNFX0ZST01fVEFSR0VUO1xyXG4gICAgICAgIHRoaXMuYXJyb3dUb3BQb3NpdGlvbiA9IC10aGlzLmFycm93U2l6ZTtcclxuXHJcbiAgICAgICAgdGhpcy5hcnJvd0xlZnRQb3NpdGlvbiA9IHRoaXMuc3RlcFdpZHRoIC8gMiAtIHRoaXMuYXJyb3dTaXplO1xyXG4gICAgICAgIHRoaXMubGVmdFBvc2l0aW9uID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRXaWR0aCAvIDIgLSB0aGlzLnN0ZXBXaWR0aCAvIDIgKyB0aGlzLnRhcmdldEFic29sdXRlTGVmdDtcclxuICAgICAgICB0aGlzLnN0ZXBBYnNvbHV0ZUxlZnQgPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldFdpZHRoIC8gMiAtIHRoaXMuc3RlcFdpZHRoIC8gMiArIHRoaXMudGFyZ2V0QWJzb2x1dGVMZWZ0O1xyXG4gICAgICAgIHRoaXMuYWRqdXN0TGVmdFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5hZGp1c3RSaWdodFBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5hcnJvd1Bvc2l0aW9uID0gJ3RvcCc7XHJcbiAgICAgICAgdGhpcy5hdXRvZml4Qm90dG9tUG9zaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFN0eWxlTGVmdCgpIHtcclxuICAgICAgICB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS51cGRhdGVQb3NpdGlvbih0aGlzLnN0ZXAubmFtZSwgJ2xlZnQnKTtcclxuICAgICAgICB0aGlzLnRvcFBvc2l0aW9uID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZVRvcCArXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0SGVpZ2h0IC8gMiAtXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhlaWdodCAvIDI7XHJcbiAgICAgICAgdGhpcy5zdGVwQWJzb2x1dGVUb3AgPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlVG9wICtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRIZWlnaHQgLyAyIC1cclxuICAgICAgICAgICAgdGhpcy5zdGVwSGVpZ2h0IC8gMjtcclxuICAgICAgICB0aGlzLmFycm93VG9wUG9zaXRpb24gPSB0aGlzLnN0ZXBIZWlnaHQgLyAyIC0gdGhpcy5hcnJvd1NpemU7XHJcblxyXG4gICAgICAgIHRoaXMubGVmdFBvc2l0aW9uID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZUxlZnQgLSB0aGlzLnN0ZXBXaWR0aCAtIERJU1RBTkNFX0ZST01fVEFSR0VUO1xyXG4gICAgICAgIHRoaXMuc3RlcEFic29sdXRlTGVmdCA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVMZWZ0IC0gdGhpcy5zdGVwV2lkdGggLSBESVNUQU5DRV9GUk9NX1RBUkdFVDtcclxuICAgICAgICB0aGlzLmFycm93TGVmdFBvc2l0aW9uID0gdGhpcy5zdGVwV2lkdGg7XHJcbiAgICAgICAgdGhpcy5hZGp1c3RUb3BQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYWRqdXN0Qm90dG9tUG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmFycm93UG9zaXRpb24gPSAncmlnaHQnO1xyXG4gICAgICAgIHRoaXMuYXV0b2ZpeExlZnRQb3NpdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U3R5bGVDZW50ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgdGhpcy5zdGVwSG9sZGVyLm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgICdwb3NpdGlvbicsXHJcbiAgICAgICAgICAgICdmaXhlZCdcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5zdGVwSG9sZGVyLm5hdGl2ZUVsZW1lbnQsICd0b3AnLCAnNTAlJyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnN0ZXBIb2xkZXIubmF0aXZlRWxlbWVudCwgJ2xlZnQnLCAnNTAlJyk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlU3RlcERpbWVuc2lvbnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgdGhpcy5zdGVwSG9sZGVyLm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nLFxyXG4gICAgICAgICAgICBgdHJhbnNsYXRlKC0ke3RoaXMuc3RlcFdpZHRoIC8gMn1weCwgLSR7dGhpcy5zdGVwSGVpZ2h0IC8gMn1weClgXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnNob3dBcnJvdyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRqdXN0TGVmdFBvc2l0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnRQb3NpdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5hcnJvd0xlZnRQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93TGVmdFBvc2l0aW9uICtcclxuICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvc2l0aW9uIC1cclxuICAgICAgICAgICAgICAgIERFRkFVTFRfRElTVEFOQ0VfRlJPTV9NQVJHSU5fTEVGVDtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0UG9zaXRpb24gPSBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX0xFRlQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRqdXN0UmlnaHRQb3NpdGlvbigpIHtcclxuICAgICAgICBsZXQgY3VycmVudFdpbmRvd1dpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcclxuICAgICAgICBpZiAodGhpcy5zdGVwQWJzb2x1dGVMZWZ0ICsgdGhpcy5zdGVwV2lkdGggPiBjdXJyZW50V2luZG93V2lkdGgpIHtcclxuICAgICAgICAgICAgbGV0IG5ld0xlZnRQb3MgPVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0UG9zaXRpb24gLVxyXG4gICAgICAgICAgICAgICAgKHRoaXMuc3RlcEFic29sdXRlTGVmdCArXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwV2lkdGggK1xyXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfRElTVEFOQ0VfRlJPTV9NQVJHSU5fUklHSFQgLVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaW5kb3dXaWR0aCk7XHJcbiAgICAgICAgICAgIGxldCBkZWx0YUxlZnRQb3NpdGlvbiA9IG5ld0xlZnRQb3MgLSB0aGlzLmxlZnRQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGVmdFBvc2l0aW9uID0gbmV3TGVmdFBvcztcclxuICAgICAgICAgICAgdGhpcy5hcnJvd0xlZnRQb3NpdGlvbiA9IHRoaXMuYXJyb3dMZWZ0UG9zaXRpb24gLSBkZWx0YUxlZnRQb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGp1c3RUb3BQb3NpdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGVwQWJzb2x1dGVUb3AgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dUb3BQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93VG9wUG9zaXRpb24gK1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3BQb3NpdGlvbiAtXHJcbiAgICAgICAgICAgICAgICBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX1RPUDtcclxuICAgICAgICAgICAgdGhpcy50b3BQb3NpdGlvbiA9IERFRkFVTFRfRElTVEFOQ0VfRlJPTV9NQVJHSU5fVE9QO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkanVzdEJvdHRvbVBvc2l0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0ZXBBYnNvbHV0ZVRvcCArIHRoaXMuc3RlcEhlaWdodCA+IHRoaXMuZG9jdW1lbnRIZWlnaHQpIHtcclxuICAgICAgICAgICAgbGV0IG5ld1RvcFBvcyA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvcFBvc2l0aW9uIC1cclxuICAgICAgICAgICAgICAgICh0aGlzLnN0ZXBBYnNvbHV0ZVRvcCArXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwSGVpZ2h0ICtcclxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX0JPVFRPTSAtXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb2N1bWVudEhlaWdodCk7XHJcbiAgICAgICAgICAgIGxldCBkZWx0YVRvcFBvc2l0aW9uID0gbmV3VG9wUG9zIC0gdGhpcy50b3BQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudG9wUG9zaXRpb24gPSBuZXdUb3BQb3M7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dUb3BQb3NpdGlvbiA9IHRoaXMuYXJyb3dUb3BQb3NpdGlvbiAtIGRlbHRhVG9wUG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXV0b2ZpeFRvcFBvc2l0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uQWxyZWFkeUZpeGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXHJcbiAgICAgICAgICAgICAgICAnTm8gc3RlcCBwb3NpdGlvbnMgZm91bmQgZm9yIHRoaXMgc3RlcC4gVGhlIHN0ZXAgd2lsbCBiZSBjZW50ZXJlZC4nXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZVRvcCAtIHRoaXMuc3RlcEhlaWdodCAtIHRoaXMuYXJyb3dTaXplIDxcclxuICAgICAgICAgICAgMFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uQWxyZWFkeUZpeGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdHlsZVJpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXV0b2ZpeFJpZ2h0UG9zaXRpb24oKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlTGVmdCArXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFdpZHRoICtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RlcFdpZHRoICtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dTaXplID5cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0eWxlQm90dG9tKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXV0b2ZpeEJvdHRvbVBvc2l0aW9uKCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZVRvcCArXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBIZWlnaHQgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd1NpemUgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRIZWlnaHQgPlxyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50SGVpZ2h0XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVMZWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXV0b2ZpeExlZnRQb3NpdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy50YXJnZXRBYnNvbHV0ZUxlZnQgLSB0aGlzLnN0ZXBXaWR0aCAtIHRoaXMuYXJyb3dTaXplIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0eWxlVG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3Vic2NyaWJlVG9SZXNpemVFdmVudHMoKTogU3Vic2NyaXB0aW9uIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmVudExpc3RlbmVyU2VydmljZS5yZXNpemVFdmVudC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlZHJhd1N0ZXAoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZHJhd1N0ZXAoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdGVwRGltZW5zaW9ucygpO1xyXG4gICAgICAgIHRoaXMuZHJhd1N0ZXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERpbWVuc2lvbnNCeUFzcGVjdFJhdGlvKFxyXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgYXNwZWN0UmF0aW86IG51bWJlclxyXG4gICAgKSB7XHJcbiAgICAgICAgbGV0IGNhbGNIZWlnaHQgPSAod2lkdGggKyBoZWlnaHQpIC8gKDEgKyBhc3BlY3RSYXRpbyk7XHJcbiAgICAgICAgbGV0IGNhbGNXaWR0aCA9IGNhbGNIZWlnaHQgKiBhc3BlY3RSYXRpbztcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aWR0aDogY2FsY1dpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGNhbGNIZWlnaHRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhZGp1c3REaW1lbnNpb25zKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGFyZWEgPSB3aWR0aCAqIGhlaWdodDtcclxuICAgICAgICBsZXQgbmV3V2lkdGggPSB3aWR0aDtcclxuICAgICAgICBsZXQgbmV3SGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIGlmICh3aWR0aCA+IFNURVBfTUFYX1dJRFRIKSB7XHJcbiAgICAgICAgICAgIG5ld1dpZHRoID0gU1RFUF9NQVhfV0lEVEg7XHJcbiAgICAgICAgICAgIG5ld0hlaWdodCA9IGFyZWEgLyBuZXdXaWR0aDtcclxuICAgICAgICB9IGVsc2UgaWYgKHdpZHRoIDwgU1RFUF9NSU5fV0lEVEgpIHtcclxuICAgICAgICAgICAgbmV3V2lkdGggPSBTVEVQX01JTl9XSURUSDtcclxuICAgICAgICAgICAgbmV3SGVpZ2h0ID0gU1RFUF9NSU5fV0lEVEggLyBBU1BFQ1RfUkFUSU87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBuZXdXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBuZXdIZWlnaHRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlU3RlcERpbWVuc2lvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5zdGVwV2lkdGggPSB0aGlzLnN0ZXBDb250YWluZXIubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICB0aGlzLnN0ZXBIZWlnaHQgPSB0aGlzLnN0ZXBDb250YWluZXIubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goc3Vic2NyaXB0aW9uID0+IHtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl19