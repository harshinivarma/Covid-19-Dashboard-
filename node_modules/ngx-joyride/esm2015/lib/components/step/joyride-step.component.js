/**
 * @fileoverview added by tsickle
 * Generated from: lib/components/step/joyride-step.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewEncapsulation, ElementRef, ViewChild, Renderer2, Injector } from '@angular/core';
import { JoyrideStep } from '../../models/joyride-step.class';
import { JoyrideStepService, ARROW_SIZE, DISTANCE_FROM_TARGET } from '../../services';
import { JoyrideStepsContainerService } from '../../services/joyride-steps-container.service';
import { EventListenerService } from '../../services/event-listener.service';
import { DocumentService } from '../../services/document.service';
import { JoyrideOptionsService } from '../../services/joyride-options.service';
import { LoggerService } from '../../services/logger.service';
import { TemplatesService } from '../../services/templates.service';
/** @type {?} */
const STEP_MIN_WIDTH = 200;
/** @type {?} */
const STEP_MAX_WIDTH = 400;
/** @type {?} */
const CUSTOM_STEP_MAX_WIDTH_VW = 90;
/** @type {?} */
const STEP_HEIGHT = 200;
/** @type {?} */
const ASPECT_RATIO = 1.212;
/** @type {?} */
export const DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;
/** @type {?} */
export const DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;
/** @type {?} */
const DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;
/** @type {?} */
const DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;
export class JoyrideStepComponent {
    /**
     * @param {?} injector
     * @param {?} stepsContainerService
     * @param {?} eventListenerService
     * @param {?} documentService
     * @param {?} renderer
     * @param {?} logger
     * @param {?} optionsService
     * @param {?} templateService
     */
    constructor(injector, stepsContainerService, eventListenerService, documentService, renderer, logger, optionsService, templateService) {
        this.injector = injector;
        this.stepsContainerService = stepsContainerService;
        this.eventListenerService = eventListenerService;
        this.documentService = documentService;
        this.renderer = renderer;
        this.logger = logger;
        this.optionsService = optionsService;
        this.templateService = templateService;
        this.stepWidth = STEP_MIN_WIDTH;
        this.stepHeight = STEP_HEIGHT;
        this.showArrow = true;
        this.arrowSize = ARROW_SIZE;
        this.subscriptions = [];
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // Need to Inject here otherwise you will obtain a circular dependency
        this.joyrideStepService = this.injector.get(JoyrideStepService);
        this.documentHeight = this.documentService.getDocumentHeight();
        this.subscriptions.push(this.subscribeToResizeEvents());
        this.title = this.step.title.asObservable();
        this.text = this.step.text.asObservable();
        this.setCustomTemplates();
        this.setCustomTexts();
        this.counter = this.getCounter();
        this.isCounterVisible = this.optionsService.isCounterVisible();
        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();
        this.themeColor = this.optionsService.getThemeColor();
        if (this.text)
            this.text.subscribe((/**
             * @param {?} val
             * @return {?}
             */
            val => this.checkRedraw(val)));
        if (this.title)
            this.title.subscribe((/**
             * @param {?} val
             * @return {?}
             */
            val => this.checkRedraw(val)));
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.isCustomized()) {
            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');
            this.updateStepDimensions();
        }
        else {
            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');
            /** @type {?} */
            let dimensions = this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth, this.stepContainer.nativeElement.clientHeight, ASPECT_RATIO);
            dimensions = this.adjustDimensions(dimensions.width, dimensions.height);
            this.stepWidth = dimensions.width;
            this.stepHeight = dimensions.height;
            this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');
            this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');
        }
        this.drawStep();
    }
    /**
     * @private
     * @param {?} val
     * @return {?}
     */
    checkRedraw(val) {
        if (val != null) {
            // Need to wait that the change is rendered before redrawing
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.redrawStep();
            }), 2);
        }
    }
    /**
     * @private
     * @return {?}
     */
    isCustomized() {
        return (this.step.stepContent ||
            this.templateService.getCounter() ||
            this.templateService.getPrevButton() ||
            this.templateService.getNextButton() ||
            this.templateService.getDoneButton());
    }
    /**
     * @private
     * @return {?}
     */
    setCustomTexts() {
        /** @type {?} */
        const customeTexts = this.optionsService.getCustomTexts();
        this.prevText = customeTexts.prev;
        this.nextText = customeTexts.next;
        this.doneText = customeTexts.done;
    }
    /**
     * @private
     * @return {?}
     */
    drawStep() {
        /** @type {?} */
        let position = this.step.isElementOrAncestorFixed
            ? 'fixed'
            : 'absolute';
        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);
        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);
        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;
        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;
        this.targetAbsoluteLeft =
            position === 'fixed'
                ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element)
                : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);
        this.targetAbsoluteTop =
            position === 'fixed'
                ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element)
                : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);
        this.setStepStyle();
    }
    /**
     * @private
     * @return {?}
     */
    getCounter() {
        /** @type {?} */
        let stepPosition = this.stepsContainerService.getStepNumber(this.step.name);
        /** @type {?} */
        let numberOfSteps = this.stepsContainerService.getStepsCount();
        this.counterData = { step: stepPosition, total: numberOfSteps };
        return stepPosition + '/' + numberOfSteps;
    }
    /**
     * @private
     * @return {?}
     */
    setCustomTemplates() {
        this.customContent = this.step.stepContent;
        this.ctx = this.step.stepContentParams;
        this.customPrevButton = this.templateService.getPrevButton();
        this.customNextButton = this.templateService.getNextButton();
        this.customDoneButton = this.templateService.getDoneButton();
        this.customCounter = this.templateService.getCounter();
    }
    /**
     * @return {?}
     */
    prev() {
        this.joyrideStepService.prev();
    }
    /**
     * @return {?}
     */
    next() {
        this.joyrideStepService.next();
    }
    /**
     * @return {?}
     */
    close() {
        this.joyrideStepService.close();
    }
    /**
     * @return {?}
     */
    isFirstStep() {
        return this.stepsContainerService.getStepNumber(this.step.name) === 1;
    }
    /**
     * @return {?}
     */
    isLastStep() {
        return (this.stepsContainerService.getStepNumber(this.step.name) ===
            this.stepsContainerService.getStepsCount());
    }
    /**
     * @private
     * @return {?}
     */
    setStepStyle() {
        switch (this.step.position) {
            case 'top': {
                this.setStyleTop();
                break;
            }
            case 'bottom': {
                this.setStyleBottom();
                break;
            }
            case 'right': {
                this.setStyleRight();
                break;
            }
            case 'left': {
                this.setStyleLeft();
                break;
            }
            case 'center': {
                this.setStyleCenter();
                break;
            }
            default: {
                this.setStyleBottom();
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    setStyleTop() {
        this.stepsContainerService.updatePosition(this.step.name, 'top');
        this.topPosition =
            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;
        this.stepAbsoluteTop =
            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;
        this.arrowTopPosition = this.stepHeight;
        this.leftPosition =
            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;
        this.stepAbsoluteLeft =
            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;
        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;
        this.adjustLeftPosition();
        this.adjustRightPosition();
        this.arrowPosition = 'bottom';
        this.autofixTopPosition();
    }
    /**
     * @private
     * @return {?}
     */
    setStyleRight() {
        this.stepsContainerService.updatePosition(this.step.name, 'right');
        this.topPosition =
            this.targetAbsoluteTop +
                this.targetHeight / 2 -
                this.stepHeight / 2;
        this.stepAbsoluteTop =
            this.targetAbsoluteTop +
                this.targetHeight / 2 -
                this.stepHeight / 2;
        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;
        this.leftPosition =
            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;
        this.stepAbsoluteLeft =
            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;
        this.arrowLeftPosition = -this.arrowSize;
        this.adjustTopPosition();
        this.adjustBottomPosition();
        this.arrowPosition = 'left';
        this.autofixRightPosition();
    }
    /**
     * @private
     * @return {?}
     */
    setStyleBottom() {
        this.stepsContainerService.updatePosition(this.step.name, 'bottom');
        this.topPosition =
            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;
        this.stepAbsoluteTop =
            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;
        this.arrowTopPosition = -this.arrowSize;
        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;
        this.leftPosition =
            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;
        this.stepAbsoluteLeft =
            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;
        this.adjustLeftPosition();
        this.adjustRightPosition();
        this.arrowPosition = 'top';
        this.autofixBottomPosition();
    }
    /**
     * @private
     * @return {?}
     */
    setStyleLeft() {
        this.stepsContainerService.updatePosition(this.step.name, 'left');
        this.topPosition =
            this.targetAbsoluteTop +
                this.targetHeight / 2 -
                this.stepHeight / 2;
        this.stepAbsoluteTop =
            this.targetAbsoluteTop +
                this.targetHeight / 2 -
                this.stepHeight / 2;
        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;
        this.leftPosition =
            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;
        this.stepAbsoluteLeft =
            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;
        this.arrowLeftPosition = this.stepWidth;
        this.adjustTopPosition();
        this.adjustBottomPosition();
        this.arrowPosition = 'right';
        this.autofixLeftPosition();
    }
    /**
     * @private
     * @return {?}
     */
    setStyleCenter() {
        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');
        this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');
        this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');
        this.updateStepDimensions();
        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`);
        this.showArrow = false;
    }
    /**
     * @private
     * @return {?}
     */
    adjustLeftPosition() {
        if (this.leftPosition < 0) {
            this.arrowLeftPosition =
                this.arrowLeftPosition +
                    this.leftPosition -
                    DEFAULT_DISTANCE_FROM_MARGIN_LEFT;
            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;
        }
    }
    /**
     * @private
     * @return {?}
     */
    adjustRightPosition() {
        /** @type {?} */
        let currentWindowWidth = document.body.clientWidth;
        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {
            /** @type {?} */
            let newLeftPos = this.leftPosition -
                (this.stepAbsoluteLeft +
                    this.stepWidth +
                    DEFAULT_DISTANCE_FROM_MARGIN_RIGHT -
                    currentWindowWidth);
            /** @type {?} */
            let deltaLeftPosition = newLeftPos - this.leftPosition;
            this.leftPosition = newLeftPos;
            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;
        }
    }
    /**
     * @private
     * @return {?}
     */
    adjustTopPosition() {
        if (this.stepAbsoluteTop < 0) {
            this.arrowTopPosition =
                this.arrowTopPosition +
                    this.topPosition -
                    DEFAULT_DISTANCE_FROM_MARGIN_TOP;
            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;
        }
    }
    /**
     * @private
     * @return {?}
     */
    adjustBottomPosition() {
        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {
            /** @type {?} */
            let newTopPos = this.topPosition -
                (this.stepAbsoluteTop +
                    this.stepHeight +
                    DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM -
                    this.documentHeight);
            /** @type {?} */
            let deltaTopPosition = newTopPos - this.topPosition;
            this.topPosition = newTopPos;
            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;
        }
    }
    /**
     * @private
     * @return {?}
     */
    autofixTopPosition() {
        if (this.positionAlreadyFixed) {
            this.logger.warn('No step positions found for this step. The step will be centered.');
        }
        else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize <
            0) {
            this.positionAlreadyFixed = true;
            this.setStyleRight();
        }
    }
    /**
     * @private
     * @return {?}
     */
    autofixRightPosition() {
        if (this.targetAbsoluteLeft +
            this.targetWidth +
            this.stepWidth +
            this.arrowSize >
            document.body.clientWidth) {
            this.setStyleBottom();
        }
    }
    /**
     * @private
     * @return {?}
     */
    autofixBottomPosition() {
        if (this.targetAbsoluteTop +
            this.stepHeight +
            this.arrowSize +
            this.targetHeight >
            this.documentHeight) {
            this.setStyleLeft();
        }
    }
    /**
     * @private
     * @return {?}
     */
    autofixLeftPosition() {
        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {
            this.setStyleTop();
        }
    }
    /**
     * @private
     * @return {?}
     */
    subscribeToResizeEvents() {
        return this.eventListenerService.resizeEvent.subscribe((/**
         * @return {?}
         */
        () => {
            this.redrawStep();
        }));
    }
    /**
     * @private
     * @return {?}
     */
    redrawStep() {
        this.updateStepDimensions();
        this.drawStep();
    }
    /**
     * @private
     * @param {?} width
     * @param {?} height
     * @param {?} aspectRatio
     * @return {?}
     */
    getDimensionsByAspectRatio(width, height, aspectRatio) {
        /** @type {?} */
        let calcHeight = (width + height) / (1 + aspectRatio);
        /** @type {?} */
        let calcWidth = calcHeight * aspectRatio;
        return {
            width: calcWidth,
            height: calcHeight
        };
    }
    /**
     * @private
     * @param {?} width
     * @param {?} height
     * @return {?}
     */
    adjustDimensions(width, height) {
        /** @type {?} */
        let area = width * height;
        /** @type {?} */
        let newWidth = width;
        /** @type {?} */
        let newHeight = height;
        if (width > STEP_MAX_WIDTH) {
            newWidth = STEP_MAX_WIDTH;
            newHeight = area / newWidth;
        }
        else if (width < STEP_MIN_WIDTH) {
            newWidth = STEP_MIN_WIDTH;
            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;
        }
        return {
            width: newWidth,
            height: newHeight
        };
    }
    /**
     * @private
     * @return {?}
     */
    updateStepDimensions() {
        this.stepWidth = this.stepContainer.nativeElement.clientWidth;
        this.stepHeight = this.stepContainer.nativeElement.clientHeight;
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.subscriptions.forEach((/**
         * @param {?} subscription
         * @return {?}
         */
        subscription => {
            subscription.unsubscribe();
        }));
    }
}
JoyrideStepComponent.decorators = [
    { type: Component, args: [{
                selector: 'joyride-step',
                template: "<div #stepHolder class=\"joyride-step__holder\" [id]=\"'joyride-step-' + step.name\" [style.top.px]=\"topPosition\" [style.left.px]=\"leftPosition\">\r\n    <joyride-arrow *ngIf=\"showArrow\" class=\"joyride-step__arrow\" [position]=\"arrowPosition\" [style.top.px]=\"arrowTopPosition\"\r\n        [style.left.px]=\"arrowLeftPosition\"></joyride-arrow>\r\n    <div #stepContainer class=\"joyride-step__container\">\r\n        <joy-close-button class=\"joyride-step__close\" (click)=\"close()\"></joy-close-button>\r\n        <div class=\"joyride-step__header\">\r\n            <div class=\"joyride-step__title\" [style.color]=\"themeColor\">{{ title | async }}</div>\r\n        </div>\r\n        <div class=\"joyride-step__body\">\r\n            <ng-container *ngTemplateOutlet=\"customContent ? customContent : defaultContent; context: ctx\"></ng-container>\r\n            <ng-template #defaultContent>\r\n                {{ text | async }}\r\n            </ng-template>\r\n        </div>\r\n        <div class=\"joyride-step__footer\">\r\n            <div *ngIf=\"isCounterVisible\" class=\"joyride-step__counter-container\">\r\n                <ng-container *ngTemplateOutlet=\"customCounter ? customCounter : defaultCounter; context: counterData\"></ng-container>\r\n                <ng-template #defaultCounter>\r\n                    <div class=\"joyride-step__counter\">{{ counter }}</div>\r\n                </ng-template>\r\n            </div>\r\n            <div class=\"joyride-step__buttons-container\">\r\n                <div class=\"joyride-step__prev-container joyride-step__button\" *ngIf=\"isPrevButtonVisible && !isFirstStep()\" (click)=\"prev()\">\r\n                    <ng-container *ngTemplateOutlet=\"customPrevButton ? customPrevButton : defaultPrevButton\"></ng-container>\r\n                    <ng-template #defaultPrevButton>\r\n                        <joyride-button class=\"joyride-step__prev-button\" [color]=\"themeColor\">{{ prevText | async }}</joyride-button>\r\n                    </ng-template>\r\n                </div>\r\n                <div class=\"joyride-step__next-container joyride-step__button\" *ngIf=\"!isLastStep(); else doneButton\" (click)=\"next()\">\r\n                    <ng-container *ngTemplateOutlet=\"customNextButton ? customNextButton : defaulNextButton\"></ng-container>\r\n                    <ng-template #defaulNextButton>\r\n                        <joyride-button [color]=\"themeColor\">{{ nextText | async }}</joyride-button>\r\n                    </ng-template>\r\n                </div>\r\n                <ng-template #doneButton>\r\n                    <div class=\"joyride-step__done-container joyride-step__button\" (click)=\"close()\">\r\n                        <ng-container *ngTemplateOutlet=\"customDoneButton ? customDoneButton : defaultDoneButton\"></ng-container>\r\n                        <ng-template #defaultDoneButton>\r\n                            <joyride-button class=\"joyride-step__done-button\" [color]=\"themeColor\">{{ doneText | async }}</joyride-button>\r\n                        </ng-template>\r\n                    </div>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",
                encapsulation: ViewEncapsulation.None,
                styles: [".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}"]
            }] }
];
/** @nocollapse */
JoyrideStepComponent.ctorParameters = () => [
    { type: Injector },
    { type: JoyrideStepsContainerService },
    { type: EventListenerService },
    { type: DocumentService },
    { type: Renderer2 },
    { type: LoggerService },
    { type: JoyrideOptionsService },
    { type: TemplatesService }
];
JoyrideStepComponent.propDecorators = {
    step: [{ type: Input }],
    stepHolder: [{ type: ViewChild, args: ['stepHolder', { static: true },] }],
    stepContainer: [{ type: ViewChild, args: ['stepContainer', { static: true },] }]
};
if (false) {
    /** @type {?} */
    JoyrideStepComponent.prototype.stepWidth;
    /** @type {?} */
    JoyrideStepComponent.prototype.stepHeight;
    /** @type {?} */
    JoyrideStepComponent.prototype.leftPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.topPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.showArrow;
    /** @type {?} */
    JoyrideStepComponent.prototype.arrowPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.arrowLeftPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.arrowTopPosition;
    /** @type {?} */
    JoyrideStepComponent.prototype.title;
    /** @type {?} */
    JoyrideStepComponent.prototype.text;
    /** @type {?} */
    JoyrideStepComponent.prototype.counter;
    /** @type {?} */
    JoyrideStepComponent.prototype.isCounterVisible;
    /** @type {?} */
    JoyrideStepComponent.prototype.isPrevButtonVisible;
    /** @type {?} */
    JoyrideStepComponent.prototype.themeColor;
    /** @type {?} */
    JoyrideStepComponent.prototype.customContent;
    /** @type {?} */
    JoyrideStepComponent.prototype.customPrevButton;
    /** @type {?} */
    JoyrideStepComponent.prototype.customNextButton;
    /** @type {?} */
    JoyrideStepComponent.prototype.customDoneButton;
    /** @type {?} */
    JoyrideStepComponent.prototype.customCounter;
    /** @type {?} */
    JoyrideStepComponent.prototype.counterData;
    /** @type {?} */
    JoyrideStepComponent.prototype.ctx;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.arrowSize;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.stepAbsoluteLeft;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.stepAbsoluteTop;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.targetWidth;
    /** @type {?} */
    JoyrideStepComponent.prototype.targetHeight;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.targetAbsoluteLeft;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.targetAbsoluteTop;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.subscriptions;
    /** @type {?} */
    JoyrideStepComponent.prototype.joyrideStepService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.positionAlreadyFixed;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.documentHeight;
    /** @type {?} */
    JoyrideStepComponent.prototype.prevText;
    /** @type {?} */
    JoyrideStepComponent.prototype.nextText;
    /** @type {?} */
    JoyrideStepComponent.prototype.doneText;
    /** @type {?} */
    JoyrideStepComponent.prototype.step;
    /** @type {?} */
    JoyrideStepComponent.prototype.stepHolder;
    /** @type {?} */
    JoyrideStepComponent.prototype.stepContainer;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.stepsContainerService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.eventListenerService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.documentService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.logger;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.optionsService;
    /**
     * @type {?}
     * @private
     */
    JoyrideStepComponent.prototype.templateService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam95cmlkZS1zdGVwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1qb3lyaWRlLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvc3RlcC9qb3lyaWRlLXN0ZXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNILFNBQVMsRUFDVCxLQUFLLEVBRUwsaUJBQWlCLEVBR2pCLFVBQVUsRUFDVixTQUFTLEVBQ1QsU0FBUyxFQUNULFFBQVEsRUFFWCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDOUQsT0FBTyxFQUNILGtCQUFrQixFQUNsQixVQUFVLEVBQ1Ysb0JBQW9CLEVBRXZCLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDOUYsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFFN0UsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQy9FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQzs7TUFFOUQsY0FBYyxHQUFHLEdBQUc7O01BQ3BCLGNBQWMsR0FBRyxHQUFHOztNQUNwQix3QkFBd0IsR0FBRyxFQUFFOztNQUM3QixXQUFXLEdBQUcsR0FBRzs7TUFDakIsWUFBWSxHQUFHLEtBQUs7O0FBQzFCLE1BQU0sT0FBTyxnQ0FBZ0MsR0FBRyxDQUFDOztBQUNqRCxNQUFNLE9BQU8saUNBQWlDLEdBQUcsQ0FBQzs7TUFDNUMsbUNBQW1DLEdBQUcsQ0FBQzs7TUFDdkMsa0NBQWtDLEdBQUcsQ0FBQztBQVE1QyxNQUFNLE9BQU8sb0JBQW9C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Qjs7SUFDMUIsb0NBQXlCOztJQUN6Qix1Q0FBZ0I7O0lBQ2hCLGdEQUEwQjs7SUFDMUIsbURBQTZCOztJQUM3QiwwQ0FBbUI7O0lBQ25CLDZDQUFnQzs7SUFDaEMsZ0RBQW1DOztJQUNuQyxnREFBbUM7O0lBQ25DLGdEQUFtQzs7SUFDbkMsNkNBQWdDOztJQUNoQywyQ0FBaUI7O0lBQ2pCLG1DQUFZOzs7OztJQUVaLHlDQUF1Qzs7Ozs7SUFDdkMsZ0RBQWlDOzs7OztJQUNqQywrQ0FBZ0M7Ozs7O0lBQ2hDLDJDQUE0Qjs7SUFDNUIsNENBQXFCOzs7OztJQUNyQixrREFBbUM7Ozs7O0lBQ25DLGlEQUFrQzs7Ozs7SUFFbEMsNkNBQTJDOztJQUMzQyxrREFBd0M7Ozs7O0lBRXhDLG9EQUFzQzs7Ozs7SUFDdEMsOENBQStCOztJQUUvQix3Q0FBNkI7O0lBQzdCLHdDQUE2Qjs7SUFDN0Isd0NBQTZCOztJQUU3QixvQ0FBNEI7O0lBQzVCLDBDQUFrRTs7SUFDbEUsNkNBQXdFOzs7OztJQUdwRSx3Q0FBMEI7Ozs7O0lBQzFCLHFEQUFvRTs7Ozs7SUFDcEUsb0RBQTJEOzs7OztJQUMzRCwrQ0FBaUQ7Ozs7O0lBQ2pELHdDQUFvQzs7Ozs7SUFDcEMsc0NBQXNDOzs7OztJQUN0Qyw4Q0FBc0Q7Ozs7O0lBQ3RELCtDQUFrRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBJbnB1dCxcclxuICAgIEFmdGVyVmlld0luaXQsXHJcbiAgICBWaWV3RW5jYXBzdWxhdGlvbixcclxuICAgIE9uSW5pdCxcclxuICAgIE9uRGVzdHJveSxcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBWaWV3Q2hpbGQsXHJcbiAgICBSZW5kZXJlcjIsXHJcbiAgICBJbmplY3RvcixcclxuICAgIFRlbXBsYXRlUmVmXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEpveXJpZGVTdGVwIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2pveXJpZGUtc3RlcC5jbGFzcyc7XHJcbmltcG9ydCB7XHJcbiAgICBKb3lyaWRlU3RlcFNlcnZpY2UsXHJcbiAgICBBUlJPV19TSVpFLFxyXG4gICAgRElTVEFOQ0VfRlJPTV9UQVJHRVQsXHJcbiAgICBJSm95cmlkZVN0ZXBTZXJ2aWNlXHJcbn0gZnJvbSAnLi4vLi4vc2VydmljZXMnO1xyXG5pbXBvcnQgeyBKb3lyaWRlU3RlcHNDb250YWluZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvam95cmlkZS1zdGVwcy1jb250YWluZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IEV2ZW50TGlzdGVuZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvZXZlbnQtbGlzdGVuZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBEb2N1bWVudFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9kb2N1bWVudC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgSm95cmlkZU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvam95cmlkZS1vcHRpb25zLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBMb2dnZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvbG9nZ2VyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZXNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvdGVtcGxhdGVzLnNlcnZpY2UnO1xyXG5cclxuY29uc3QgU1RFUF9NSU5fV0lEVEggPSAyMDA7XHJcbmNvbnN0IFNURVBfTUFYX1dJRFRIID0gNDAwO1xyXG5jb25zdCBDVVNUT01fU1RFUF9NQVhfV0lEVEhfVlcgPSA5MDtcclxuY29uc3QgU1RFUF9IRUlHSFQgPSAyMDA7XHJcbmNvbnN0IEFTUEVDVF9SQVRJTyA9IDEuMjEyO1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9ESVNUQU5DRV9GUk9NX01BUkdJTl9UT1AgPSAyO1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9ESVNUQU5DRV9GUk9NX01BUkdJTl9MRUZUID0gMjtcclxuY29uc3QgREVGQVVMVF9ESVNUQU5DRV9GUk9NX01BUkdJTl9CT1RUT00gPSA1O1xyXG5jb25zdCBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX1JJR0hUID0gNTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdqb3lyaWRlLXN0ZXAnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2pveXJpZGUtc3RlcC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9qb3lyaWRlLXN0ZXAuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIEpveXJpZGVTdGVwQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3ksIEFmdGVyVmlld0luaXQge1xyXG4gICAgc3RlcFdpZHRoOiBudW1iZXIgPSBTVEVQX01JTl9XSURUSDtcclxuICAgIHN0ZXBIZWlnaHQ6IG51bWJlciA9IFNURVBfSEVJR0hUO1xyXG4gICAgbGVmdFBvc2l0aW9uOiBudW1iZXI7XHJcbiAgICB0b3BQb3NpdGlvbjogbnVtYmVyO1xyXG4gICAgc2hvd0Fycm93ID0gdHJ1ZTtcclxuICAgIGFycm93UG9zaXRpb246IHN0cmluZztcclxuICAgIGFycm93TGVmdFBvc2l0aW9uOiBudW1iZXI7XHJcbiAgICBhcnJvd1RvcFBvc2l0aW9uOiBudW1iZXI7XHJcbiAgICB0aXRsZTogT2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgdGV4dDogT2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgY291bnRlcjogc3RyaW5nO1xyXG4gICAgaXNDb3VudGVyVmlzaWJsZTogYm9vbGVhbjtcclxuICAgIGlzUHJldkJ1dHRvblZpc2libGU6IGJvb2xlYW47XHJcbiAgICB0aGVtZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBjdXN0b21Db250ZW50OiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgY3VzdG9tUHJldkJ1dHRvbjogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIGN1c3RvbU5leHRCdXR0b246IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICBjdXN0b21Eb25lQnV0dG9uOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgY3VzdG9tQ291bnRlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIGNvdW50ZXJEYXRhOiBhbnk7XHJcbiAgICBjdHg6IE9iamVjdDtcclxuXHJcbiAgICBwcml2YXRlIGFycm93U2l6ZTogbnVtYmVyID0gQVJST1dfU0laRTtcclxuICAgIHByaXZhdGUgc3RlcEFic29sdXRlTGVmdDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzdGVwQWJzb2x1dGVUb3A6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGFyZ2V0V2lkdGg6IG51bWJlcjtcclxuICAgIHRhcmdldEhlaWdodDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0YXJnZXRBYnNvbHV0ZUxlZnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGFyZ2V0QWJzb2x1dGVUb3A6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcbiAgICBqb3lyaWRlU3RlcFNlcnZpY2U6IElKb3lyaWRlU3RlcFNlcnZpY2U7XHJcblxyXG4gICAgcHJpdmF0ZSBwb3NpdGlvbkFscmVhZHlGaXhlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgZG9jdW1lbnRIZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICBwcmV2VGV4dDogT2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgbmV4dFRleHQ6IE9ic2VydmFibGU8c3RyaW5nPjtcclxuICAgIGRvbmVUZXh0OiBPYnNlcnZhYmxlPHN0cmluZz47XHJcblxyXG4gICAgQElucHV0KCkgc3RlcD86IEpveXJpZGVTdGVwO1xyXG4gICAgQFZpZXdDaGlsZCgnc3RlcEhvbGRlcicsIHsgc3RhdGljOiB0cnVlIH0pIHN0ZXBIb2xkZXI6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdzdGVwQ29udGFpbmVyJywgeyBzdGF0aWM6IHRydWUgfSkgc3RlcENvbnRhaW5lcjogRWxlbWVudFJlZjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHN0ZXBzQ29udGFpbmVyU2VydmljZTogSm95cmlkZVN0ZXBzQ29udGFpbmVyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGV2ZW50TGlzdGVuZXJTZXJ2aWNlOiBFdmVudExpc3RlbmVyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGRvY3VtZW50U2VydmljZTogRG9jdW1lbnRTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyZXI6IFJlbmRlcmVyMixcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlcjogTG9nZ2VyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnNTZXJ2aWNlOiBKb3lyaWRlT3B0aW9uc1NlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZVNlcnZpY2U6IFRlbXBsYXRlc1NlcnZpY2VcclxuICAgICkge31cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgICAvLyBOZWVkIHRvIEluamVjdCBoZXJlIG90aGVyd2lzZSB5b3Ugd2lsbCBvYnRhaW4gYSBjaXJjdWxhciBkZXBlbmRlbmN5XHJcbiAgICAgICAgdGhpcy5qb3lyaWRlU3RlcFNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChKb3lyaWRlU3RlcFNlcnZpY2UpO1xyXG5cclxuICAgICAgICB0aGlzLmRvY3VtZW50SGVpZ2h0ID0gdGhpcy5kb2N1bWVudFNlcnZpY2UuZ2V0RG9jdW1lbnRIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCh0aGlzLnN1YnNjcmliZVRvUmVzaXplRXZlbnRzKCkpO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLnN0ZXAudGl0bGUuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy5zdGVwLnRleHQuYXNPYnNlcnZhYmxlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0Q3VzdG9tVGVtcGxhdGVzKCk7XHJcbiAgICAgICAgdGhpcy5zZXRDdXN0b21UZXh0cygpO1xyXG5cclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSB0aGlzLmdldENvdW50ZXIoKTtcclxuICAgICAgICB0aGlzLmlzQ291bnRlclZpc2libGUgPSB0aGlzLm9wdGlvbnNTZXJ2aWNlLmlzQ291bnRlclZpc2libGUoKTtcclxuICAgICAgICB0aGlzLmlzUHJldkJ1dHRvblZpc2libGUgPSB0aGlzLm9wdGlvbnNTZXJ2aWNlLmlzUHJldkJ1dHRvblZpc2libGUoKTtcclxuICAgICAgICB0aGlzLnRoZW1lQ29sb3IgPSB0aGlzLm9wdGlvbnNTZXJ2aWNlLmdldFRoZW1lQ29sb3IoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGV4dCkgdGhpcy50ZXh0LnN1YnNjcmliZSh2YWwgPT4gdGhpcy5jaGVja1JlZHJhdyh2YWwpKTtcclxuICAgICAgICBpZiAodGhpcy50aXRsZSkgdGhpcy50aXRsZS5zdWJzY3JpYmUodmFsID0+IHRoaXMuY2hlY2tSZWRyYXcodmFsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ3VzdG9taXplZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBDb250YWluZXIubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgICAgICdtYXgtd2lkdGgnLFxyXG4gICAgICAgICAgICAgICAgQ1VTVE9NX1NURVBfTUFYX1dJRFRIX1ZXICsgJ3Z3J1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0ZXBEaW1lbnNpb25zKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RlcENvbnRhaW5lci5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgJ21heC13aWR0aCcsXHJcbiAgICAgICAgICAgICAgICBTVEVQX01BWF9XSURUSCArICdweCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbGV0IGRpbWVuc2lvbnMgPSB0aGlzLmdldERpbWVuc2lvbnNCeUFzcGVjdFJhdGlvKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBDb250YWluZXIubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBBU1BFQ1RfUkFUSU9cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZGltZW5zaW9ucyA9IHRoaXMuYWRqdXN0RGltZW5zaW9ucyhcclxuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25zLmhlaWdodFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnN0ZXBXaWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhlaWdodCA9IGRpbWVuc2lvbnMuaGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAnd2lkdGgnLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwV2lkdGggKyAncHgnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBDb250YWluZXIubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgICAgICdoZWlnaHQnLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwSGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRyYXdTdGVwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja1JlZHJhdyh2YWwpIHtcclxuICAgICAgICBpZiAodmFsICE9IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gTmVlZCB0byB3YWl0IHRoYXQgdGhlIGNoYW5nZSBpcyByZW5kZXJlZCBiZWZvcmUgcmVkcmF3aW5nXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWRyYXdTdGVwKCk7XHJcbiAgICAgICAgICAgIH0sIDIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQ3VzdG9taXplZCgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLnN0ZXAuc3RlcENvbnRlbnQgfHxcclxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZVNlcnZpY2UuZ2V0Q291bnRlcigpIHx8XHJcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldFByZXZCdXR0b24oKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZS5nZXROZXh0QnV0dG9uKCkgfHxcclxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZVNlcnZpY2UuZ2V0RG9uZUJ1dHRvbigpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEN1c3RvbVRleHRzKCkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbWVUZXh0cyA9IHRoaXMub3B0aW9uc1NlcnZpY2UuZ2V0Q3VzdG9tVGV4dHMoKTtcclxuICAgICAgICB0aGlzLnByZXZUZXh0ID0gY3VzdG9tZVRleHRzLnByZXY7XHJcbiAgICAgICAgdGhpcy5uZXh0VGV4dCA9IGN1c3RvbWVUZXh0cy5uZXh0O1xyXG4gICAgICAgIHRoaXMuZG9uZVRleHQgPSBjdXN0b21lVGV4dHMuZG9uZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRyYXdTdGVwKCkge1xyXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuc3RlcC5pc0VsZW1lbnRPckFuY2VzdG9yRml4ZWRcclxuICAgICAgICAgICAgPyAnZml4ZWQnXHJcbiAgICAgICAgICAgIDogJ2Fic29sdXRlJztcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxyXG4gICAgICAgICAgICB0aGlzLnN0ZXBIb2xkZXIubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgJ3Bvc2l0aW9uJyxcclxuICAgICAgICAgICAgcG9zaXRpb25cclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhvbGRlci5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAndHJhbnNmb3JtJyxcclxuICAgICAgICAgICAgdGhpcy5zdGVwLnRyYW5zZm9ybUNzc1N0eWxlXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnRhcmdldFdpZHRoID0gdGhpcy5zdGVwLnRhcmdldFZpZXdDb250YWluZXIuZWxlbWVudC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SGVpZ2h0ID0gdGhpcy5zdGVwLnRhcmdldFZpZXdDb250YWluZXIuZWxlbWVudC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlTGVmdCA9XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID09PSAnZml4ZWQnXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuZG9jdW1lbnRTZXJ2aWNlLmdldEVsZW1lbnRGaXhlZExlZnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0ZXAudGFyZ2V0Vmlld0NvbnRhaW5lci5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIDogdGhpcy5kb2N1bWVudFNlcnZpY2UuZ2V0RWxlbWVudEFic29sdXRlTGVmdChcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcC50YXJnZXRWaWV3Q29udGFpbmVyLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlVG9wID1cclxuICAgICAgICAgICAgcG9zaXRpb24gPT09ICdmaXhlZCdcclxuICAgICAgICAgICAgICAgID8gdGhpcy5kb2N1bWVudFNlcnZpY2UuZ2V0RWxlbWVudEZpeGVkVG9wKFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwLnRhcmdldFZpZXdDb250YWluZXIuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuZG9jdW1lbnRTZXJ2aWNlLmdldEVsZW1lbnRBYnNvbHV0ZVRvcChcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcC50YXJnZXRWaWV3Q29udGFpbmVyLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnNldFN0ZXBTdHlsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q291bnRlcigpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBzdGVwUG9zaXRpb24gPSB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS5nZXRTdGVwTnVtYmVyKFxyXG4gICAgICAgICAgICB0aGlzLnN0ZXAubmFtZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IG51bWJlck9mU3RlcHMgPSB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS5nZXRTdGVwc0NvdW50KCk7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyRGF0YSA9IHsgc3RlcDogc3RlcFBvc2l0aW9uLCB0b3RhbDogbnVtYmVyT2ZTdGVwcyB9O1xyXG4gICAgICAgIHJldHVybiBzdGVwUG9zaXRpb24gKyAnLycgKyBudW1iZXJPZlN0ZXBzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q3VzdG9tVGVtcGxhdGVzKCkge1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQ29udGVudCA9IHRoaXMuc3RlcC5zdGVwQ29udGVudDtcclxuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuc3RlcC5zdGVwQ29udGVudFBhcmFtcztcclxuICAgICAgICB0aGlzLmN1c3RvbVByZXZCdXR0b24gPSB0aGlzLnRlbXBsYXRlU2VydmljZS5nZXRQcmV2QnV0dG9uKCk7XHJcbiAgICAgICAgdGhpcy5jdXN0b21OZXh0QnV0dG9uID0gdGhpcy50ZW1wbGF0ZVNlcnZpY2UuZ2V0TmV4dEJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRG9uZUJ1dHRvbiA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldERvbmVCdXR0b24oKTtcclxuICAgICAgICB0aGlzLmN1c3RvbUNvdW50ZXIgPSB0aGlzLnRlbXBsYXRlU2VydmljZS5nZXRDb3VudGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJldigpIHtcclxuICAgICAgICB0aGlzLmpveXJpZGVTdGVwU2VydmljZS5wcmV2KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dCgpIHtcclxuICAgICAgICB0aGlzLmpveXJpZGVTdGVwU2VydmljZS5uZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5qb3lyaWRlU3RlcFNlcnZpY2UuY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0ZpcnN0U3RlcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGVwc0NvbnRhaW5lclNlcnZpY2UuZ2V0U3RlcE51bWJlcih0aGlzLnN0ZXAubmFtZSkgPT09IDE7XHJcbiAgICB9XHJcblxyXG4gICAgaXNMYXN0U3RlcCgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS5nZXRTdGVwTnVtYmVyKHRoaXMuc3RlcC5uYW1lKSA9PT1cclxuICAgICAgICAgICAgdGhpcy5zdGVwc0NvbnRhaW5lclNlcnZpY2UuZ2V0U3RlcHNDb3VudCgpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFN0ZXBTdHlsZSgpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RlcC5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0eWxlVG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdib3R0b20nOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0eWxlQm90dG9tKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdyaWdodCc6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVSaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnbGVmdCc6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdjZW50ZXInOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0eWxlQ2VudGVyKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0eWxlQm90dG9tKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTdHlsZVRvcCgpIHtcclxuICAgICAgICB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS51cGRhdGVQb3NpdGlvbih0aGlzLnN0ZXAubmFtZSwgJ3RvcCcpO1xyXG4gICAgICAgIHRoaXMudG9wUG9zaXRpb24gPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlVG9wIC0gRElTVEFOQ0VfRlJPTV9UQVJHRVQgLSB0aGlzLnN0ZXBIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zdGVwQWJzb2x1dGVUb3AgPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlVG9wIC0gRElTVEFOQ0VfRlJPTV9UQVJHRVQgLSB0aGlzLnN0ZXBIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5hcnJvd1RvcFBvc2l0aW9uID0gdGhpcy5zdGVwSGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLmxlZnRQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0V2lkdGggLyAyIC0gdGhpcy5zdGVwV2lkdGggLyAyICsgdGhpcy50YXJnZXRBYnNvbHV0ZUxlZnQ7XHJcbiAgICAgICAgdGhpcy5zdGVwQWJzb2x1dGVMZWZ0ID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRXaWR0aCAvIDIgLSB0aGlzLnN0ZXBXaWR0aCAvIDIgKyB0aGlzLnRhcmdldEFic29sdXRlTGVmdDtcclxuICAgICAgICB0aGlzLmFycm93TGVmdFBvc2l0aW9uID0gdGhpcy5zdGVwV2lkdGggLyAyIC0gdGhpcy5hcnJvd1NpemU7XHJcbiAgICAgICAgdGhpcy5hZGp1c3RMZWZ0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmFkanVzdFJpZ2h0UG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmFycm93UG9zaXRpb24gPSAnYm90dG9tJztcclxuICAgICAgICB0aGlzLmF1dG9maXhUb3BQb3NpdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U3R5bGVSaWdodCgpIHtcclxuICAgICAgICB0aGlzLnN0ZXBzQ29udGFpbmVyU2VydmljZS51cGRhdGVQb3NpdGlvbih0aGlzLnN0ZXAubmFtZSwgJ3JpZ2h0Jyk7XHJcbiAgICAgICAgdGhpcy50b3BQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVUb3AgK1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEhlaWdodCAvIDIgLVxyXG4gICAgICAgICAgICB0aGlzLnN0ZXBIZWlnaHQgLyAyO1xyXG4gICAgICAgIHRoaXMuc3RlcEFic29sdXRlVG9wID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZVRvcCArXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0SGVpZ2h0IC8gMiAtXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhlaWdodCAvIDI7XHJcbiAgICAgICAgdGhpcy5hcnJvd1RvcFBvc2l0aW9uID0gdGhpcy5zdGVwSGVpZ2h0IC8gMiAtIHRoaXMuYXJyb3dTaXplO1xyXG5cclxuICAgICAgICB0aGlzLmxlZnRQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVMZWZ0ICsgdGhpcy50YXJnZXRXaWR0aCArIERJU1RBTkNFX0ZST01fVEFSR0VUO1xyXG4gICAgICAgIHRoaXMuc3RlcEFic29sdXRlTGVmdCA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVMZWZ0ICsgdGhpcy50YXJnZXRXaWR0aCArIERJU1RBTkNFX0ZST01fVEFSR0VUO1xyXG4gICAgICAgIHRoaXMuYXJyb3dMZWZ0UG9zaXRpb24gPSAtdGhpcy5hcnJvd1NpemU7XHJcbiAgICAgICAgdGhpcy5hZGp1c3RUb3BQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYWRqdXN0Qm90dG9tUG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmFycm93UG9zaXRpb24gPSAnbGVmdCc7XHJcbiAgICAgICAgdGhpcy5hdXRvZml4UmlnaHRQb3NpdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U3R5bGVCb3R0b20oKSB7XHJcbiAgICAgICAgdGhpcy5zdGVwc0NvbnRhaW5lclNlcnZpY2UudXBkYXRlUG9zaXRpb24odGhpcy5zdGVwLm5hbWUsICdib3R0b20nKTtcclxuICAgICAgICB0aGlzLnRvcFBvc2l0aW9uID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZVRvcCArIHRoaXMudGFyZ2V0SGVpZ2h0ICsgRElTVEFOQ0VfRlJPTV9UQVJHRVQ7XHJcbiAgICAgICAgdGhpcy5zdGVwQWJzb2x1dGVUb3AgPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlVG9wICsgdGhpcy50YXJnZXRIZWlnaHQgKyBESVNUQU5DRV9GUk9NX1RBUkdFVDtcclxuICAgICAgICB0aGlzLmFycm93VG9wUG9zaXRpb24gPSAtdGhpcy5hcnJvd1NpemU7XHJcblxyXG4gICAgICAgIHRoaXMuYXJyb3dMZWZ0UG9zaXRpb24gPSB0aGlzLnN0ZXBXaWR0aCAvIDIgLSB0aGlzLmFycm93U2l6ZTtcclxuICAgICAgICB0aGlzLmxlZnRQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0V2lkdGggLyAyIC0gdGhpcy5zdGVwV2lkdGggLyAyICsgdGhpcy50YXJnZXRBYnNvbHV0ZUxlZnQ7XHJcbiAgICAgICAgdGhpcy5zdGVwQWJzb2x1dGVMZWZ0ID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRXaWR0aCAvIDIgLSB0aGlzLnN0ZXBXaWR0aCAvIDIgKyB0aGlzLnRhcmdldEFic29sdXRlTGVmdDtcclxuICAgICAgICB0aGlzLmFkanVzdExlZnRQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYWRqdXN0UmlnaHRQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYXJyb3dQb3NpdGlvbiA9ICd0b3AnO1xyXG4gICAgICAgIHRoaXMuYXV0b2ZpeEJvdHRvbVBvc2l0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTdHlsZUxlZnQoKSB7XHJcbiAgICAgICAgdGhpcy5zdGVwc0NvbnRhaW5lclNlcnZpY2UudXBkYXRlUG9zaXRpb24odGhpcy5zdGVwLm5hbWUsICdsZWZ0Jyk7XHJcbiAgICAgICAgdGhpcy50b3BQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVUb3AgK1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEhlaWdodCAvIDIgLVxyXG4gICAgICAgICAgICB0aGlzLnN0ZXBIZWlnaHQgLyAyO1xyXG4gICAgICAgIHRoaXMuc3RlcEFic29sdXRlVG9wID1cclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZVRvcCArXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0SGVpZ2h0IC8gMiAtXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhlaWdodCAvIDI7XHJcbiAgICAgICAgdGhpcy5hcnJvd1RvcFBvc2l0aW9uID0gdGhpcy5zdGVwSGVpZ2h0IC8gMiAtIHRoaXMuYXJyb3dTaXplO1xyXG5cclxuICAgICAgICB0aGlzLmxlZnRQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVMZWZ0IC0gdGhpcy5zdGVwV2lkdGggLSBESVNUQU5DRV9GUk9NX1RBUkdFVDtcclxuICAgICAgICB0aGlzLnN0ZXBBYnNvbHV0ZUxlZnQgPVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEFic29sdXRlTGVmdCAtIHRoaXMuc3RlcFdpZHRoIC0gRElTVEFOQ0VfRlJPTV9UQVJHRVQ7XHJcbiAgICAgICAgdGhpcy5hcnJvd0xlZnRQb3NpdGlvbiA9IHRoaXMuc3RlcFdpZHRoO1xyXG4gICAgICAgIHRoaXMuYWRqdXN0VG9wUG9zaXRpb24oKTtcclxuICAgICAgICB0aGlzLmFkanVzdEJvdHRvbVBvc2l0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5hcnJvd1Bvc2l0aW9uID0gJ3JpZ2h0JztcclxuICAgICAgICB0aGlzLmF1dG9maXhMZWZ0UG9zaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFN0eWxlQ2VudGVyKCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhvbGRlci5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAncG9zaXRpb24nLFxyXG4gICAgICAgICAgICAnZml4ZWQnXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuc3RlcEhvbGRlci5uYXRpdmVFbGVtZW50LCAndG9wJywgJzUwJScpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5zdGVwSG9sZGVyLm5hdGl2ZUVsZW1lbnQsICdsZWZ0JywgJzUwJScpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVN0ZXBEaW1lbnNpb25zKCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcEhvbGRlci5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAndHJhbnNmb3JtJyxcclxuICAgICAgICAgICAgYHRyYW5zbGF0ZSgtJHt0aGlzLnN0ZXBXaWR0aCAvIDJ9cHgsIC0ke3RoaXMuc3RlcEhlaWdodCAvIDJ9cHgpYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5zaG93QXJyb3cgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkanVzdExlZnRQb3NpdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5sZWZ0UG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dMZWZ0UG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd0xlZnRQb3NpdGlvbiArXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnRQb3NpdGlvbiAtXHJcbiAgICAgICAgICAgICAgICBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX0xFRlQ7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdFBvc2l0aW9uID0gREVGQVVMVF9ESVNUQU5DRV9GUk9NX01BUkdJTl9MRUZUO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkanVzdFJpZ2h0UG9zaXRpb24oKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRXaW5kb3dXaWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RlcEFic29sdXRlTGVmdCArIHRoaXMuc3RlcFdpZHRoID4gY3VycmVudFdpbmRvd1dpZHRoKSB7XHJcbiAgICAgICAgICAgIGxldCBuZXdMZWZ0UG9zID1cclxuICAgICAgICAgICAgICAgIHRoaXMubGVmdFBvc2l0aW9uIC1cclxuICAgICAgICAgICAgICAgICh0aGlzLnN0ZXBBYnNvbHV0ZUxlZnQgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFdpZHRoICtcclxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX1JJR0hUIC1cclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2luZG93V2lkdGgpO1xyXG4gICAgICAgICAgICBsZXQgZGVsdGFMZWZ0UG9zaXRpb24gPSBuZXdMZWZ0UG9zIC0gdGhpcy5sZWZ0UG9zaXRpb247XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxlZnRQb3NpdGlvbiA9IG5ld0xlZnRQb3M7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dMZWZ0UG9zaXRpb24gPSB0aGlzLmFycm93TGVmdFBvc2l0aW9uIC0gZGVsdGFMZWZ0UG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRqdXN0VG9wUG9zaXRpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RlcEFic29sdXRlVG9wIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLmFycm93VG9wUG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd1RvcFBvc2l0aW9uICtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9wUG9zaXRpb24gLVxyXG4gICAgICAgICAgICAgICAgREVGQVVMVF9ESVNUQU5DRV9GUk9NX01BUkdJTl9UT1A7XHJcbiAgICAgICAgICAgIHRoaXMudG9wUG9zaXRpb24gPSBERUZBVUxUX0RJU1RBTkNFX0ZST01fTUFSR0lOX1RPUDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGp1c3RCb3R0b21Qb3NpdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGVwQWJzb2x1dGVUb3AgKyB0aGlzLnN0ZXBIZWlnaHQgPiB0aGlzLmRvY3VtZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGxldCBuZXdUb3BQb3MgPVxyXG4gICAgICAgICAgICAgICAgdGhpcy50b3BQb3NpdGlvbiAtXHJcbiAgICAgICAgICAgICAgICAodGhpcy5zdGVwQWJzb2x1dGVUb3AgK1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcEhlaWdodCArXHJcbiAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9ESVNUQU5DRV9GUk9NX01BUkdJTl9CT1RUT00gLVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRIZWlnaHQpO1xyXG4gICAgICAgICAgICBsZXQgZGVsdGFUb3BQb3NpdGlvbiA9IG5ld1RvcFBvcyAtIHRoaXMudG9wUG9zaXRpb247XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRvcFBvc2l0aW9uID0gbmV3VG9wUG9zO1xyXG4gICAgICAgICAgICB0aGlzLmFycm93VG9wUG9zaXRpb24gPSB0aGlzLmFycm93VG9wUG9zaXRpb24gLSBkZWx0YVRvcFBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGF1dG9maXhUb3BQb3NpdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbkFscmVhZHlGaXhlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFxyXG4gICAgICAgICAgICAgICAgJ05vIHN0ZXAgcG9zaXRpb25zIGZvdW5kIGZvciB0aGlzIHN0ZXAuIFRoZSBzdGVwIHdpbGwgYmUgY2VudGVyZWQuJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVUb3AgLSB0aGlzLnN0ZXBIZWlnaHQgLSB0aGlzLmFycm93U2l6ZSA8XHJcbiAgICAgICAgICAgIDBcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbkFscmVhZHlGaXhlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3R5bGVSaWdodCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGF1dG9maXhSaWdodFBvc2l0aW9uKCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBYnNvbHV0ZUxlZnQgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRXaWR0aCArXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXBXaWR0aCArXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93U2l6ZSA+XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGhcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdHlsZUJvdHRvbSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGF1dG9maXhCb3R0b21Qb3NpdGlvbigpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QWJzb2x1dGVUb3AgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwSGVpZ2h0ICtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dTaXplICtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0SGVpZ2h0ID5cclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudEhlaWdodFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0eWxlTGVmdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGF1dG9maXhMZWZ0UG9zaXRpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0QWJzb2x1dGVMZWZ0IC0gdGhpcy5zdGVwV2lkdGggLSB0aGlzLmFycm93U2l6ZSA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdHlsZVRvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN1YnNjcmliZVRvUmVzaXplRXZlbnRzKCk6IFN1YnNjcmlwdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRMaXN0ZW5lclNlcnZpY2UucmVzaXplRXZlbnQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWRyYXdTdGVwKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWRyYXdTdGVwKCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RlcERpbWVuc2lvbnMoKTtcclxuICAgICAgICB0aGlzLmRyYXdTdGVwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaW1lbnNpb25zQnlBc3BlY3RSYXRpbyhcclxuICAgICAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgIGFzcGVjdFJhdGlvOiBudW1iZXJcclxuICAgICkge1xyXG4gICAgICAgIGxldCBjYWxjSGVpZ2h0ID0gKHdpZHRoICsgaGVpZ2h0KSAvICgxICsgYXNwZWN0UmF0aW8pO1xyXG4gICAgICAgIGxldCBjYWxjV2lkdGggPSBjYWxjSGVpZ2h0ICogYXNwZWN0UmF0aW87XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd2lkdGg6IGNhbGNXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjYWxjSGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYWRqdXN0RGltZW5zaW9ucyh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBhcmVhID0gd2lkdGggKiBoZWlnaHQ7XHJcbiAgICAgICAgbGV0IG5ld1dpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgbGV0IG5ld0hlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBpZiAod2lkdGggPiBTVEVQX01BWF9XSURUSCkge1xyXG4gICAgICAgICAgICBuZXdXaWR0aCA9IFNURVBfTUFYX1dJRFRIO1xyXG4gICAgICAgICAgICBuZXdIZWlnaHQgPSBhcmVhIC8gbmV3V2lkdGg7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3aWR0aCA8IFNURVBfTUlOX1dJRFRIKSB7XHJcbiAgICAgICAgICAgIG5ld1dpZHRoID0gU1RFUF9NSU5fV0lEVEg7XHJcbiAgICAgICAgICAgIG5ld0hlaWdodCA9IFNURVBfTUlOX1dJRFRIIC8gQVNQRUNUX1JBVElPO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aWR0aDogbmV3V2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogbmV3SGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVN0ZXBEaW1lbnNpb25zKCkge1xyXG4gICAgICAgIHRoaXMuc3RlcFdpZHRoID0gdGhpcy5zdGVwQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdGhpcy5zdGVwSGVpZ2h0ID0gdGhpcy5zdGVwQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHN1YnNjcmlwdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==