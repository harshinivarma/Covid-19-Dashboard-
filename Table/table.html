<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<style>
  #graph {
    overflow: hidden;
    overflow-y: scroll;
    overflow-wrap: unset;
    overflow: -moz-hidden-unscrollable;
  }
</style>
<style>
  /* width */
  ::-webkit-scrollbar {
    width: 10px;
  }

  /* Track */
  ::-webkit-scrollbar-track {
    background: #f1f1f1;
  }

  /* Handle */
  ::-webkit-scrollbar-thumb {
    background: #888;
  }

  /* Handle on hover */
  ::-webkit-scrollbar-thumb:hover {
    background: #555;
  }

  #container {
    background-color: #000000;
  }
</style>
<canvas
  class="graph"
  id="charts"
  width="100"
  height="100"
  style="z-index: 10000;"
></canvas>

<script>
  const xlables = [];
  const ytemps = [];
  chartit();
  async function chartit() {
    await getdata();
    const ctx = document.getElementById("charts").getContext("2d");

    const myChart = new Chart(ctx, {
      type: "line",
      data: {
        labels: xlables,
        datasets: [
          {
            label: "Confirmed",
            label: "Recovered",
            data: ytemps,
            backgroundColor: "rgba(255, 99, 132, 0.2)",

            borderColor: "rgba(255, 99, 132, 1)",

            borderWidth: 1,
          },
        ],
      },
    });
  }

  async function getdata() {
    setInterval((getdata) => {}, 1000);
    const response = await fetch(
      "https://api.covid19india.org/csv/latest/case_time_series.csv"
    );
    const data = await response.text();
    console.log(data);

    const table = data.split("\n").slice(1);
    table.forEach((row) => {
      const columns = row.split(",");
      const State = columns[0];
      xlables.push(State);
      const Confirmed = columns[1];
      ytemps.push(Confirmed);
      const Recovered = columns[4];
      console.log(State, Confirmed, Recovered);
    });
  }
</script>
